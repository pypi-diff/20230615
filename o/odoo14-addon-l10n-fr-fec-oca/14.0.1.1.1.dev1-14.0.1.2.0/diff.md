# Comparing `tmp/odoo14_addon_l10n_fr_fec_oca-14.0.1.1.1.dev1-py3-none-any.whl.zip` & `tmp/odoo14_addon_l10n_fr_fec_oca-14.0.1.2.0-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,21 +1,21 @@
-Zip file size: 34278 bytes, number of entries: 19
--rw-r--r--  2.0 unx     4331 b- defN 22-Oct-16 07:47 odoo/addons/l10n_fr_fec_oca/README.rst
--rw-r--r--  2.0 unx       21 b- defN 22-Oct-16 07:47 odoo/addons/l10n_fr_fec_oca/__init__.py
--rw-r--r--  2.0 unx      844 b- defN 22-Oct-16 07:47 odoo/addons/l10n_fr_fec_oca/__manifest__.py
--rw-r--r--  2.0 unx    11105 b- defN 22-Oct-16 07:47 odoo/addons/l10n_fr_fec_oca/i18n/fr.po
--rw-r--r--  2.0 unx     7318 b- defN 22-Oct-16 07:47 odoo/addons/l10n_fr_fec_oca/i18n/l10n_fr_fec.pot
--rw-r--r--  2.0 unx     9927 b- defN 22-Oct-16 07:47 odoo/addons/l10n_fr_fec_oca/i18n/l10n_fr_fec_oca.pot
--rw-r--r--  2.0 unx       86 b- defN 22-Oct-16 07:47 odoo/addons/l10n_fr_fec_oca/readme/CONTRIBUTORS.rst
--rw-r--r--  2.0 unx     1344 b- defN 22-Oct-16 07:47 odoo/addons/l10n_fr_fec_oca/readme/DESCRIPTION.rst
--rw-r--r--  2.0 unx      136 b- defN 22-Oct-16 07:47 odoo/addons/l10n_fr_fec_oca/readme/USAGE.rst
--rw-r--r--  2.0 unx      215 b- defN 22-Oct-16 07:47 odoo/addons/l10n_fr_fec_oca/security/ir.model.access.csv
--rw-r--r--  2.0 unx     9455 b- defN 22-Oct-16 07:47 odoo/addons/l10n_fr_fec_oca/static/description/icon.png
--rw-r--r--  2.0 unx    13851 b- defN 22-Oct-16 07:47 odoo/addons/l10n_fr_fec_oca/static/description/index.html
--rw-r--r--  2.0 unx       33 b- defN 22-Oct-16 07:47 odoo/addons/l10n_fr_fec_oca/wizard/__init__.py
--rw-r--r--  2.0 unx    23375 b- defN 22-Oct-16 07:47 odoo/addons/l10n_fr_fec_oca/wizard/account_fr_fec_oca.py
--rw-r--r--  2.0 unx     5823 b- defN 22-Oct-16 07:47 odoo/addons/l10n_fr_fec_oca/wizard/account_fr_fec_oca_view.xml
--rw-r--r--  2.0 unx     4993 b- defN 22-Oct-16 07:48 odoo14_addon_l10n_fr_fec_oca-14.0.1.1.1.dev1.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 22-Oct-16 07:48 odoo14_addon_l10n_fr_fec_oca-14.0.1.1.1.dev1.dist-info/WHEEL
--rw-r--r--  2.0 unx        5 b- defN 22-Oct-16 07:48 odoo14_addon_l10n_fr_fec_oca-14.0.1.1.1.dev1.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     2005 b- defN 22-Oct-16 07:48 odoo14_addon_l10n_fr_fec_oca-14.0.1.1.1.dev1.dist-info/RECORD
-19 files, 94959 bytes uncompressed, 30838 bytes compressed:  67.5%
+Zip file size: 34305 bytes, number of entries: 19
+-rw-r--r--  2.0 unx     4331 b- defN 23-Jun-15 16:47 odoo/addons/l10n_fr_fec_oca/README.rst
+-rw-r--r--  2.0 unx       21 b- defN 23-Jun-15 16:47 odoo/addons/l10n_fr_fec_oca/__init__.py
+-rw-r--r--  2.0 unx      844 b- defN 23-Jun-15 16:48 odoo/addons/l10n_fr_fec_oca/__manifest__.py
+-rw-r--r--  2.0 unx    11105 b- defN 23-Jun-15 16:47 odoo/addons/l10n_fr_fec_oca/i18n/fr.po
+-rw-r--r--  2.0 unx     7318 b- defN 23-Jun-15 16:47 odoo/addons/l10n_fr_fec_oca/i18n/l10n_fr_fec.pot
+-rw-r--r--  2.0 unx     9927 b- defN 23-Jun-15 16:47 odoo/addons/l10n_fr_fec_oca/i18n/l10n_fr_fec_oca.pot
+-rw-r--r--  2.0 unx       86 b- defN 23-Jun-15 16:47 odoo/addons/l10n_fr_fec_oca/readme/CONTRIBUTORS.rst
+-rw-r--r--  2.0 unx     1344 b- defN 23-Jun-15 16:47 odoo/addons/l10n_fr_fec_oca/readme/DESCRIPTION.rst
+-rw-r--r--  2.0 unx      136 b- defN 23-Jun-15 16:47 odoo/addons/l10n_fr_fec_oca/readme/USAGE.rst
+-rw-r--r--  2.0 unx      215 b- defN 23-Jun-15 16:47 odoo/addons/l10n_fr_fec_oca/security/ir.model.access.csv
+-rw-r--r--  2.0 unx     9455 b- defN 23-Jun-15 16:47 odoo/addons/l10n_fr_fec_oca/static/description/icon.png
+-rw-r--r--  2.0 unx    13851 b- defN 23-Jun-15 16:47 odoo/addons/l10n_fr_fec_oca/static/description/index.html
+-rw-r--r--  2.0 unx       33 b- defN 23-Jun-15 16:47 odoo/addons/l10n_fr_fec_oca/wizard/__init__.py
+-rw-r--r--  2.0 unx    23459 b- defN 23-Jun-15 16:47 odoo/addons/l10n_fr_fec_oca/wizard/account_fr_fec_oca.py
+-rw-r--r--  2.0 unx     5823 b- defN 23-Jun-15 16:47 odoo/addons/l10n_fr_fec_oca/wizard/account_fr_fec_oca_view.xml
+-rw-r--r--  2.0 unx     4988 b- defN 23-Jun-15 16:48 odoo14_addon_l10n_fr_fec_oca-14.0.1.2.0.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Jun-15 16:48 odoo14_addon_l10n_fr_fec_oca-14.0.1.2.0.dist-info/WHEEL
+-rw-r--r--  2.0 unx        5 b- defN 23-Jun-15 16:48 odoo14_addon_l10n_fr_fec_oca-14.0.1.2.0.dist-info/top_level.txt
+?rw-rw-r--  2.0 unx     1985 b- defN 23-Jun-15 16:48 odoo14_addon_l10n_fr_fec_oca-14.0.1.2.0.dist-info/RECORD
+19 files, 95018 bytes uncompressed, 30905 bytes compressed:  67.5%
```

## zipnote {}

```diff
@@ -39,20 +39,20 @@
 
 Filename: odoo/addons/l10n_fr_fec_oca/wizard/account_fr_fec_oca.py
 Comment: 
 
 Filename: odoo/addons/l10n_fr_fec_oca/wizard/account_fr_fec_oca_view.xml
 Comment: 
 
-Filename: odoo14_addon_l10n_fr_fec_oca-14.0.1.1.1.dev1.dist-info/METADATA
+Filename: odoo14_addon_l10n_fr_fec_oca-14.0.1.2.0.dist-info/METADATA
 Comment: 
 
-Filename: odoo14_addon_l10n_fr_fec_oca-14.0.1.1.1.dev1.dist-info/WHEEL
+Filename: odoo14_addon_l10n_fr_fec_oca-14.0.1.2.0.dist-info/WHEEL
 Comment: 
 
-Filename: odoo14_addon_l10n_fr_fec_oca-14.0.1.1.1.dev1.dist-info/top_level.txt
+Filename: odoo14_addon_l10n_fr_fec_oca-14.0.1.2.0.dist-info/top_level.txt
 Comment: 
 
-Filename: odoo14_addon_l10n_fr_fec_oca-14.0.1.1.1.dev1.dist-info/RECORD
+Filename: odoo14_addon_l10n_fr_fec_oca-14.0.1.2.0.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## odoo/addons/l10n_fr_fec_oca/__manifest__.py

```diff
@@ -2,15 +2,15 @@
 # @author: Alexis de Lattre <alexis.delattre@akretion.com>
 # Copyright 2016-2020 Odoo SA (https://www.odoo.com/fr_FR/)
 # @author: Alexis de Lattre <alexis.delattre@akretion.com>
 
 {
     "name": "France - FEC",
     "category": "Accounting",
-    "version": "14.0.1.1.0",
+    "version": "14.0.1.2.0",
     "license": "LGPL-3",
     "summary": "Fichier d'Échange Informatisé (FEC) for France",
     "author": "Akretion,Odoo Community Association (OCA)",
     "maintainers": ["alexis-via"],
     "website": "https://github.com/OCA/l10n-france",
     "depends": ["l10n_fr", "account", "date_range"],
     "external_dependencies": {
```

## odoo/addons/l10n_fr_fec_oca/wizard/account_fr_fec_oca.py

```diff
@@ -188,14 +188,74 @@
         # Get SIREN from SIRET and not from VAT
         # so that it also work on companies that are not subject to VAT
         if not company.siret:
             raise UserError(_("Missing SIRET on company %s.") % company.display_name)
         siren = company.siret[:9]
         return siren
 
+    def _get_aux_fields(self, sql_args):
+        sql_aux_num_base = """
+        CASE WHEN rp.ref IS null OR rp.ref = ''
+        THEN COALESCE('ID' || rp.id, '')
+        ELSE replace(rp.ref, '|', '/')
+        END
+        """
+        sql_aux_lib_base = """
+        COALESCE(replace(replace(rp.name, '|', '/'), '\t', ''), '')
+        """
+        if self.partner_option == "types":
+            sql_args["partner_account_type_ids"] = tuple(
+                self.partner_account_type_ids.ids
+            )
+            return (
+                """
+            case when aat.id in %(partner_account_type_ids)s
+            then """
+                + sql_aux_num_base
+                + """
+            else ''
+            end
+            as CompAuxNum,
+            case when aat.id in %(partner_account_type_ids)s
+            then """
+                + sql_aux_lib_base
+                + """
+            else ''
+            end
+            as CompAuxLib,
+            """
+            )
+        elif self.partner_option == "accounts":
+            sql_args["partner_account_ids"] = tuple(self.partner_account_ids.ids)
+            return (
+                """
+            CASE WHEN aa.id IN %(partner_account_ids)s
+            THEN """
+                + sql_aux_num_base
+                + """
+            ELSE ''
+            END
+            AS CompAuxNum,
+            CASE WHEN aa.id IN %(partner_account_ids)s
+            THEN """
+                + sql_aux_lib_base
+                + """
+            ELSE ''
+            END
+            AS CompAuxLib,
+            """
+            )
+        else:
+            return (
+                sql_aux_num_base
+                + "AS CompAuxNum, "
+                + sql_aux_lib_base
+                + "AS CompAuxLib,"
+            )
+
     # flake8: noqa: C901
     def generate_fec(self):
         self.ensure_one()
         # We choose to implement the flat file instead of the XML
         # file for 2 reasons :
         # 1) the XSD file impose to have the label on the account.move
         # but Odoo has the label on the account.move.line, so that's a
@@ -349,72 +409,15 @@
             and (
                 unaffected_earnings_results[11] != "0,00"
                 or unaffected_earnings_results[12] != "0,00"
             )
         ):
             rows_to_write.append(unaffected_earnings_results)
 
-        sql_aux_num_base = """
-        CASE WHEN rp.ref IS null OR rp.ref = ''
-        THEN COALESCE('ID' || rp.id, '')
-        ELSE replace(rp.ref, '|', '/')
-        END
-        """
-        sql_aux_lib_base = """
-        COALESCE(replace(replace(rp.name, '|', '/'), '\t', ''), '')
-        """
-        if self.partner_option == "types":
-            aux_fields = (
-                """
-            CASE WHEN aat.id IN %(partner_account_type_ids)s
-            THEN """
-                + sql_aux_num_base
-                + """
-            ELSE ''
-            END
-            AS CompAuxNum,
-            CASE WHEN aat.id IN %(partner_account_type_ids)s
-            THEN """
-                + sql_aux_lib_base
-                + """
-            ELSE ''
-            END
-            AS CompAuxLib,
-            """
-            )
-            sql_args["partner_account_type_ids"] = tuple(
-                self.partner_account_type_ids.ids
-            )
-        elif self.partner_option == "accounts":
-            aux_fields = (
-                """
-            CASE WHEN aa.id IN %(partner_account_ids)s
-            THEN """
-                + sql_aux_num_base
-                + """
-            ELSE ''
-            END
-            AS CompAuxNum,
-            CASE WHEN aa.id IN %(partner_account_ids)s
-            THEN """
-                + sql_aux_lib_base
-                + """
-            ELSE ''
-            END
-            AS CompAuxLib,
-            """
-            )
-            sql_args["partner_account_ids"] = tuple(self.partner_account_ids.ids)
-        else:
-            aux_fields = (
-                sql_aux_num_base
-                + "AS CompAuxNum, "
-                + sql_aux_lib_base
-                + "AS CompAuxLib,"
-            )
+        aux_fields = self._get_aux_fields(sql_args)
 
         aux_fields_ini_bal = aux_fields.replace("aa.id IN", "MIN(aa.id) IN").replace(
             "aat.id IN", "MIN(aat.id) IN"
         )
         # INITIAL BALANCE - receivable/payable
         sql_query = (
             """
@@ -464,15 +467,15 @@
         # For official report: only use posted entries
         if self.export_type == "official":
             sql_query += " AND am.state = 'posted' "
         else:
             sql_query += " AND am.state IN ('draft', 'posted') "
 
         sql_query += """
-        GROUP BY aml.account_id, aat.type, rp.id
+        GROUP BY aml.account_id, aat.type, rp.id, aat.id
         HAVING round(sum(aml.balance), %(currency_digits)s) != 0
         AND aat.type in ('receivable', 'payable')
         """
         self._cr.execute(sql_query, sql_args)
 
         for row in self._cr.fetchall():
             listrow = list(row)
```

## Comparing `odoo14_addon_l10n_fr_fec_oca-14.0.1.1.1.dev1.dist-info/METADATA` & `odoo14_addon_l10n_fr_fec_oca-14.0.1.2.0.dist-info/METADATA`

 * *Files 1% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: odoo14-addon-l10n-fr-fec-oca
-Version: 14.0.1.1.1.dev1
+Version: 14.0.1.2.0
 Summary: Fichier d'Échange Informatisé (FEC) for France
 Home-page: https://github.com/OCA/l10n-france
 Author: Akretion,Odoo Community Association (OCA)
 Author-email: support@odoo-community.org
 License: LGPL-3
 Platform: UNKNOWN
 Classifier: Programming Language :: Python
```

## Comparing `odoo14_addon_l10n_fr_fec_oca-14.0.1.1.1.dev1.dist-info/RECORD` & `odoo14_addon_l10n_fr_fec_oca-14.0.1.2.0.dist-info/RECORD`

 * *Files 17% similar despite different names*

```diff
@@ -1,19 +1,19 @@
 odoo/addons/l10n_fr_fec_oca/README.rst,sha256=Re3BB77jyaryZwHXoQ1QyztBkgSCbHrVKvPj7-zIoH8,4331
 odoo/addons/l10n_fr_fec_oca/__init__.py,sha256=jI5PZDKS0aV-yXubn1o0DHe5ldzQZrLmZYbgF0Q7DWg,21
-odoo/addons/l10n_fr_fec_oca/__manifest__.py,sha256=ZpXV6-j-LKZvgP09VRAz5RMyAuFUpgD5RUa8cmuHhGE,844
+odoo/addons/l10n_fr_fec_oca/__manifest__.py,sha256=NnnTTWkiB5fNak1dUyJUuHLxuAcjdVuI8DkS6SwbimA,844
 odoo/addons/l10n_fr_fec_oca/i18n/fr.po,sha256=5LR0fgN1pCk62b4PCYu45g6zOZ-WU74tvx87HDc8ZP8,11105
 odoo/addons/l10n_fr_fec_oca/i18n/l10n_fr_fec.pot,sha256=vPbUHWkHbcrKYEARorxgC8ENHSZGi7GzrIQB89HO8vM,7318
 odoo/addons/l10n_fr_fec_oca/i18n/l10n_fr_fec_oca.pot,sha256=Z8JhkmUL9nlBHKvMAA1hiEfZGagGe-3oGh0-7R2LpYk,9927
 odoo/addons/l10n_fr_fec_oca/readme/CONTRIBUTORS.rst,sha256=KC_8iSJlIHR7lfhH3Z9WRCPtaUFjVA7qr86HDdsGPcs,86
 odoo/addons/l10n_fr_fec_oca/readme/DESCRIPTION.rst,sha256=-esDPu8L8iQTiDuVunV_hgKUKVhKJPE05SJMcSzOlr0,1344
 odoo/addons/l10n_fr_fec_oca/readme/USAGE.rst,sha256=C2V1480tggXuqsBMwgF96-vo1CdZfblint_pngL3O58,136
 odoo/addons/l10n_fr_fec_oca/security/ir.model.access.csv,sha256=fPX_aD3wHT5pSVvXnZ8MjVA_YoygpXWcDEFZpaADVss,215
 odoo/addons/l10n_fr_fec_oca/static/description/icon.png,sha256=6xBPJauaFOF0KDHfHgQopSc28kKvxMaeoQFQWZtfZDo,9455
 odoo/addons/l10n_fr_fec_oca/static/description/index.html,sha256=i4bicjvLQ9MDbabU0lj9nzyRRFmoFp3sQKIupMp5uWM,13851
 odoo/addons/l10n_fr_fec_oca/wizard/__init__.py,sha256=fbQd41ELqGqrQXq76xFSqD4Qn5eTh49leHlTKSzJvyI,33
-odoo/addons/l10n_fr_fec_oca/wizard/account_fr_fec_oca.py,sha256=5gO7WeZ_d55-mx4Mv9tn9NJWVrjFgrG0ssSVk4VtO8k,23375
+odoo/addons/l10n_fr_fec_oca/wizard/account_fr_fec_oca.py,sha256=6h7pQ2nZZWyDssLAqBaMpblap2-gt51VQ3r7GnUqav4,23459
 odoo/addons/l10n_fr_fec_oca/wizard/account_fr_fec_oca_view.xml,sha256=EjqpSHOSy0Ot6I9RnVkgi7wDZ86wcz6WpvG6CjKf0Zk,5823
-odoo14_addon_l10n_fr_fec_oca-14.0.1.1.1.dev1.dist-info/METADATA,sha256=60BOCmsGEKG2IJlZv6bLoaqUPWAfrTIQQejznNKI3Lk,4993
-odoo14_addon_l10n_fr_fec_oca-14.0.1.1.1.dev1.dist-info/WHEEL,sha256=G16H4A3IeoQmnOrYV4ueZGKSjhipXx8zc8nu9FGlvMA,92
-odoo14_addon_l10n_fr_fec_oca-14.0.1.1.1.dev1.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
-odoo14_addon_l10n_fr_fec_oca-14.0.1.1.1.dev1.dist-info/RECORD,,
+odoo14_addon_l10n_fr_fec_oca-14.0.1.2.0.dist-info/METADATA,sha256=eMvYQD1uPD9QBzROv-s_FoekmOwe_OWVpEm56W9gfIw,4988
+odoo14_addon_l10n_fr_fec_oca-14.0.1.2.0.dist-info/WHEEL,sha256=2wepM1nk4DS4eFpYrW1TTqPcoGNfHhhO_i5m4cOimbo,92
+odoo14_addon_l10n_fr_fec_oca-14.0.1.2.0.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
+odoo14_addon_l10n_fr_fec_oca-14.0.1.2.0.dist-info/RECORD,,
```

