# Comparing `tmp/modal_client-0.49.2401-py3-none-any.whl.zip` & `tmp/modal_client-0.49.2406-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,159 +1,160 @@
-Zip file size: 257901 bytes, number of entries: 157
--rw-r--r--  2.0 unx       28 b- defN 23-Jun-14 23:59 client_test/__init__.py
--rw-r--r--  2.0 unx      472 b- defN 23-Jun-14 23:59 client_test/aio_test.py
--rw-r--r--  2.0 unx     5409 b- defN 23-Jun-14 23:59 client_test/async_utils_test.py
--rw-r--r--  2.0 unx     1483 b- defN 23-Jun-14 23:59 client_test/blob_test.py
--rw-r--r--  2.0 unx     3979 b- defN 23-Jun-14 23:59 client_test/cli_imports_test.py
--rw-r--r--  2.0 unx    13833 b- defN 23-Jun-14 23:59 client_test/cli_test.py
--rw-r--r--  2.0 unx     4768 b- defN 23-Jun-14 23:59 client_test/client_test.py
--rw-r--r--  2.0 unx     4422 b- defN 23-Jun-14 23:59 client_test/cls_test.py
--rw-r--r--  2.0 unx     2618 b- defN 23-Jun-14 23:59 client_test/config_test.py
--rw-r--r--  2.0 unx    31907 b- defN 23-Jun-14 23:59 client_test/conftest.py
--rw-r--r--  2.0 unx     4551 b- defN 23-Jun-14 23:59 client_test/container_app_test.py
--rw-r--r--  2.0 unx    26624 b- defN 23-Jun-14 23:59 client_test/container_test.py
--rw-r--r--  2.0 unx     1086 b- defN 23-Jun-14 23:59 client_test/deprecation_test.py
--rw-r--r--  2.0 unx     2182 b- defN 23-Jun-14 23:59 client_test/e2e_test.py
--rw-r--r--  2.0 unx      165 b- defN 23-Jun-14 23:59 client_test/error_test.py
--rw-r--r--  2.0 unx      964 b- defN 23-Jun-14 23:59 client_test/function_serialization_test.py
--rw-r--r--  2.0 unx    17319 b- defN 23-Jun-14 23:59 client_test/function_test.py
--rw-r--r--  2.0 unx     3924 b- defN 23-Jun-14 23:59 client_test/gpu_test.py
--rw-r--r--  2.0 unx     5047 b- defN 23-Jun-14 23:59 client_test/grpc_utils_test.py
--rw-r--r--  2.0 unx      930 b- defN 23-Jun-14 23:59 client_test/helpers.py
--rw-r--r--  2.0 unx    15884 b- defN 23-Jun-14 23:59 client_test/image_test.py
--rw-r--r--  2.0 unx     2372 b- defN 23-Jun-14 23:59 client_test/live_reload_test.py
--rw-r--r--  2.0 unx     2605 b- defN 23-Jun-14 23:59 client_test/lookup_test.py
--rw-r--r--  2.0 unx     5301 b- defN 23-Jun-14 23:59 client_test/mount_test.py
--rw-r--r--  2.0 unx     6239 b- defN 23-Jun-14 23:59 client_test/mounted_files_test.py
--rw-r--r--  2.0 unx     2157 b- defN 23-Jun-14 23:59 client_test/notebook_test.py
--rw-r--r--  2.0 unx     1390 b- defN 23-Jun-14 23:59 client_test/object_test.py
--rw-r--r--  2.0 unx      413 b- defN 23-Jun-14 23:59 client_test/package_utils_test.py
--rw-r--r--  2.0 unx     1807 b- defN 23-Jun-14 23:59 client_test/retries_test.py
--rw-r--r--  2.0 unx      359 b- defN 23-Jun-14 23:59 client_test/schedule_test.py
--rw-r--r--  2.0 unx     1821 b- defN 23-Jun-14 23:59 client_test/secret_test.py
--rw-r--r--  2.0 unx     1082 b- defN 23-Jun-14 23:59 client_test/serialization_test.py
--rw-r--r--  2.0 unx     3872 b- defN 23-Jun-14 23:59 client_test/shared_volume_test.py
--rw-r--r--  2.0 unx     8064 b- defN 23-Jun-14 23:59 client_test/stub_test.py
--rw-r--r--  2.0 unx     2691 b- defN 23-Jun-14 23:59 client_test/utils_test.py
--rw-r--r--  2.0 unx      410 b- defN 23-Jun-14 23:59 client_test/version_test.py
--rw-r--r--  2.0 unx     1160 b- defN 23-Jun-14 23:59 client_test/watcher_test.py
--rw-r--r--  2.0 unx     3837 b- defN 23-Jun-14 23:59 client_test/webhook_test.py
--rw-r--r--  2.0 unx     1042 b- defN 23-Jun-14 23:59 modal/__init__.py
--rw-r--r--  2.0 unx      157 b- defN 23-Jun-14 23:59 modal/__main__.py
--rw-r--r--  2.0 unx     2106 b- defN 23-Jun-14 23:59 modal/_asgi.py
--rw-r--r--  2.0 unx    13413 b- defN 23-Jun-14 23:59 modal/_blob_utils.py
--rw-r--r--  2.0 unx    26368 b- defN 23-Jun-14 23:59 modal/_container_entrypoint.py
--rw-r--r--  2.0 unx    10990 b- defN 23-Jun-14 23:59 modal/_function_utils.py
--rw-r--r--  2.0 unx      450 b- defN 23-Jun-14 23:59 modal/_ipython.py
--rw-r--r--  2.0 unx      929 b- defN 23-Jun-14 23:59 modal/_location.py
--rw-r--r--  2.0 unx      850 b- defN 23-Jun-14 23:59 modal/_object_meta.py
--rw-r--r--  2.0 unx    17552 b- defN 23-Jun-14 23:59 modal/_output.py
--rw-r--r--  2.0 unx     1785 b- defN 23-Jun-14 23:59 modal/_proxy_tunnel.py
--rw-r--r--  2.0 unx     5043 b- defN 23-Jun-14 23:59 modal/_pty.py
--rw-r--r--  2.0 unx     4701 b- defN 23-Jun-14 23:59 modal/_resolver.py
--rw-r--r--  2.0 unx     1885 b- defN 23-Jun-14 23:59 modal/_serialization.py
--rw-r--r--  2.0 unx     7598 b- defN 23-Jun-14 23:59 modal/_traceback.py
--rw-r--r--  2.0 unx     1995 b- defN 23-Jun-14 23:59 modal/_tracing.py
--rw-r--r--  2.0 unx      490 b- defN 23-Jun-14 23:59 modal/_types.py
--rw-r--r--  2.0 unx     3409 b- defN 23-Jun-14 23:59 modal/_watcher.py
--rw-r--r--  2.0 unx     1704 b- defN 23-Jun-14 23:59 modal/aio.py
--rw-r--r--  2.0 unx    11503 b- defN 23-Jun-14 23:59 modal/app.py
--rw-r--r--  2.0 unx     8077 b- defN 23-Jun-14 23:59 modal/app.pyi
--rw-r--r--  2.0 unx     2462 b- defN 23-Jun-14 23:59 modal/call_graph.py
--rw-r--r--  2.0 unx     9175 b- defN 23-Jun-14 23:59 modal/client.py
--rw-r--r--  2.0 unx     4479 b- defN 23-Jun-14 23:59 modal/client.pyi
--rw-r--r--  2.0 unx     1793 b- defN 23-Jun-14 23:59 modal/cls.py
--rw-r--r--  2.0 unx     6802 b- defN 23-Jun-14 23:59 modal/config.py
--rw-r--r--  2.0 unx     5597 b- defN 23-Jun-14 23:59 modal/dict.py
--rw-r--r--  2.0 unx     4312 b- defN 23-Jun-14 23:59 modal/dict.pyi
--rw-r--r--  2.0 unx     2750 b- defN 23-Jun-14 23:59 modal/exception.py
--rw-r--r--  2.0 unx    57506 b- defN 23-Jun-14 23:59 modal/functions.py
--rw-r--r--  2.0 unx    24159 b- defN 23-Jun-14 23:59 modal/functions.pyi
--rw-r--r--  2.0 unx     4995 b- defN 23-Jun-14 23:59 modal/gpu.py
--rw-r--r--  2.0 unx    49023 b- defN 23-Jun-14 23:59 modal/image.py
--rw-r--r--  2.0 unx    22504 b- defN 23-Jun-14 23:59 modal/image.pyi
--rw-r--r--  2.0 unx    15439 b- defN 23-Jun-14 23:59 modal/mount.py
--rw-r--r--  2.0 unx     7696 b- defN 23-Jun-14 23:59 modal/mount.pyi
--rw-r--r--  2.0 unx    12490 b- defN 23-Jun-14 23:59 modal/object.py
--rw-r--r--  2.0 unx    10908 b- defN 23-Jun-14 23:59 modal/object.pyi
--rw-r--r--  2.0 unx      652 b- defN 23-Jun-14 23:59 modal/proxy.py
--rw-r--r--  2.0 unx     1111 b- defN 23-Jun-14 23:59 modal/proxy.pyi
--rw-r--r--  2.0 unx        0 b- defN 23-Jun-14 23:59 modal/py.typed
--rw-r--r--  2.0 unx     5144 b- defN 23-Jun-14 23:59 modal/queue.py
--rw-r--r--  2.0 unx     3375 b- defN 23-Jun-14 23:59 modal/queue.pyi
--rw-r--r--  2.0 unx      502 b- defN 23-Jun-14 23:59 modal/requirements.txt
--rw-r--r--  2.0 unx     3730 b- defN 23-Jun-14 23:59 modal/retries.py
--rw-r--r--  2.0 unx     8881 b- defN 23-Jun-14 23:59 modal/runner.py
--rw-r--r--  2.0 unx     2619 b- defN 23-Jun-14 23:59 modal/schedule.py
--rw-r--r--  2.0 unx     5190 b- defN 23-Jun-14 23:59 modal/secret.py
--rw-r--r--  2.0 unx     1150 b- defN 23-Jun-14 23:59 modal/secret.pyi
--rw-r--r--  2.0 unx     4372 b- defN 23-Jun-14 23:59 modal/serving.py
--rw-r--r--  2.0 unx     8270 b- defN 23-Jun-14 23:59 modal/shared_volume.py
--rw-r--r--  2.0 unx     4226 b- defN 23-Jun-14 23:59 modal/shared_volume.pyi
--rw-r--r--  2.0 unx    31463 b- defN 23-Jun-14 23:59 modal/stub.py
--rw-r--r--  2.0 unx    20577 b- defN 23-Jun-14 23:59 modal/stub.pyi
--rw-r--r--  2.0 unx       28 b- defN 23-Jun-14 23:59 modal/cli/__init__.py
--rw-r--r--  2.0 unx     2966 b- defN 23-Jun-14 23:59 modal/cli/app.py
--rw-r--r--  2.0 unx      484 b- defN 23-Jun-14 23:59 modal/cli/config.py
--rw-r--r--  2.0 unx     1958 b- defN 23-Jun-14 23:59 modal/cli/entry_point.py
--rw-r--r--  2.0 unx      902 b- defN 23-Jun-14 23:59 modal/cli/env.py
--rw-r--r--  2.0 unx    10572 b- defN 23-Jun-14 23:59 modal/cli/import_refs.py
--rw-r--r--  2.0 unx      689 b- defN 23-Jun-14 23:59 modal/cli/profile.py
--rw-r--r--  2.0 unx     9118 b- defN 23-Jun-14 23:59 modal/cli/run.py
--rw-r--r--  2.0 unx     3738 b- defN 23-Jun-14 23:59 modal/cli/secret.py
--rw-r--r--  2.0 unx     3524 b- defN 23-Jun-14 23:59 modal/cli/token.py
--rw-r--r--  2.0 unx      313 b- defN 23-Jun-14 23:59 modal/cli/utils.py
--rw-r--r--  2.0 unx     9690 b- defN 23-Jun-14 23:59 modal/cli/volume.py
--rw-r--r--  2.0 unx       28 b- defN 23-Jun-14 23:59 modal/extensions/__init__.py
--rw-r--r--  2.0 unx      987 b- defN 23-Jun-14 23:59 modal/extensions/ipython.py
--rw-r--r--  2.0 unx     6495 b- defN 23-Jun-14 23:59 modal/extensions/pymc.py
--rw-r--r--  2.0 unx       28 b- defN 23-Jun-14 23:59 modal_base_images/__init__.py
--rw-r--r--  2.0 unx      457 b- defN 23-Jun-14 23:59 modal_base_images/client_mount.py
--rw-r--r--  2.0 unx      264 b- defN 23-Jun-14 23:59 modal_base_images/conda.py
--rw-r--r--  2.0 unx      342 b- defN 23-Jun-14 23:59 modal_base_images/debian_slim.py
--rw-r--r--  2.0 unx       28 b- defN 23-Jun-14 23:59 modal_proto/__init__.py
--rw-r--r--  2.0 unx    27195 b- defN 23-Jun-14 23:59 modal_proto/api.proto
--rw-r--r--  2.0 unx    45233 b- defN 23-Jun-14 23:59 modal_proto/api_grpc.py
--rw-r--r--  2.0 unx   112701 b- defN 23-Jun-14 23:59 modal_proto/api_pb2.py
--rw-r--r--  2.0 unx    97860 b- defN 23-Jun-14 23:59 modal_proto/api_pb2_grpc.py
--rw-r--r--  2.0 unx       28 b- defN 23-Jun-14 23:59 modal_test_support/__init__.py
--rw-r--r--  2.0 unx      134 b- defN 23-Jun-14 23:59 modal_test_support/assert_package.py
--rw-r--r--  2.0 unx      171 b- defN 23-Jun-14 23:59 modal_test_support/consumed_map.py
--rw-r--r--  2.0 unx     4757 b- defN 23-Jun-14 23:59 modal_test_support/functions.py
--rw-r--r--  2.0 unx      183 b- defN 23-Jun-14 23:59 modal_test_support/hello.py
--rw-r--r--  2.0 unx      266 b- defN 23-Jun-14 23:59 modal_test_support/image_run_function.py
--rw-r--r--  2.0 unx      180 b- defN 23-Jun-14 23:59 modal_test_support/is_inside.py
--rw-r--r--  2.0 unx      187 b- defN 23-Jun-14 23:59 modal_test_support/missing_main_conditional.py
--rw-r--r--  2.0 unx       59 b- defN 23-Jun-14 23:59 modal_test_support/module_1.py
--rw-r--r--  2.0 unx       59 b- defN 23-Jun-14 23:59 modal_test_support/module_2.py
--rw-r--r--  2.0 unx      277 b- defN 23-Jun-14 23:59 modal_test_support/multistub.py
--rw-r--r--  2.0 unx      228 b- defN 23-Jun-14 23:59 modal_test_support/multistub_is_inside.py
--rw-r--r--  2.0 unx      222 b- defN 23-Jun-14 23:59 modal_test_support/multistub_is_inside_warning.py
--rw-r--r--  2.0 unx      269 b- defN 23-Jun-14 23:59 modal_test_support/multistub_privately_decorated.py
--rw-r--r--  2.0 unx      211 b- defN 23-Jun-14 23:59 modal_test_support/multistub_privately_decorated_named_stub.py
--rw-r--r--  2.0 unx      218 b- defN 23-Jun-14 23:59 modal_test_support/multistub_same_name.py
--rw-r--r--  2.0 unx      219 b- defN 23-Jun-14 23:59 modal_test_support/multistub_serialized_func.py
--rw-r--r--  2.0 unx      197 b- defN 23-Jun-14 23:59 modal_test_support/package_mount.py
--rw-r--r--  2.0 unx      171 b- defN 23-Jun-14 23:59 modal_test_support/progress_info.py
--rw-r--r--  2.0 unx      153 b- defN 23-Jun-14 23:59 modal_test_support/script.py
--rw-r--r--  2.0 unx      178 b- defN 23-Jun-14 23:59 modal_test_support/startup_failure.py
--rw-r--r--  2.0 unx      177 b- defN 23-Jun-14 23:59 modal_test_support/stub.py
--rw-r--r--  2.0 unx      144 b- defN 23-Jun-14 23:59 modal_test_support/unconsumed_map.py
--rw-r--r--  2.0 unx      123 b- defN 23-Jun-14 23:59 modal_test_support/webhook_forgot_function.py
--rw-r--r--  2.0 unx       28 b- defN 23-Jun-14 23:59 modal_utils/__init__.py
--rw-r--r--  2.0 unx      465 b- defN 23-Jun-14 23:59 modal_utils/app_utils.py
--rw-r--r--  2.0 unx    11319 b- defN 23-Jun-14 23:59 modal_utils/async_utils.py
--rw-r--r--  2.0 unx      890 b- defN 23-Jun-14 23:59 modal_utils/decorator_utils.py
--rw-r--r--  2.0 unx     9837 b- defN 23-Jun-14 23:59 modal_utils/grpc_utils.py
--rw-r--r--  2.0 unx     1597 b- defN 23-Jun-14 23:59 modal_utils/hash_utils.py
--rw-r--r--  2.0 unx     1426 b- defN 23-Jun-14 23:59 modal_utils/http_utils.py
--rw-r--r--  2.0 unx      113 b- defN 23-Jun-14 23:59 modal_utils/logger.py
--rw-r--r--  2.0 unx     1226 b- defN 23-Jun-14 23:59 modal_utils/package_utils.py
--rw-r--r--  2.0 unx      458 b- defN 23-Jun-14 23:59 modal_version/__init__.py
--rw-r--r--  2.0 unx       48 b- defN 23-Jun-14 23:59 modal_version/_version_generated.py
--rw-r--r--  2.0 unx    10173 b- defN 23-Jun-14 23:59 modal_client-0.49.2401.dist-info/LICENSE
--rw-r--r--  2.0 unx     1880 b- defN 23-Jun-14 23:59 modal_client-0.49.2401.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-Jun-14 23:59 modal_client-0.49.2401.dist-info/WHEEL
--rw-r--r--  2.0 unx       46 b- defN 23-Jun-14 23:59 modal_client-0.49.2401.dist-info/entry_points.txt
--rw-r--r--  2.0 unx       93 b- defN 23-Jun-14 23:59 modal_client-0.49.2401.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx    12770 b- defN 23-Jun-14 23:59 modal_client-0.49.2401.dist-info/RECORD
-157 files, 1055446 bytes uncompressed, 238101 bytes compressed:  77.4%
+Zip file size: 258749 bytes, number of entries: 158
+-rw-r--r--  2.0 unx       28 b- defN 23-Jun-15 06:40 client_test/__init__.py
+-rw-r--r--  2.0 unx      472 b- defN 23-Jun-15 06:40 client_test/aio_test.py
+-rw-r--r--  2.0 unx     5409 b- defN 23-Jun-15 06:40 client_test/async_utils_test.py
+-rw-r--r--  2.0 unx     1483 b- defN 23-Jun-15 06:40 client_test/blob_test.py
+-rw-r--r--  2.0 unx     3979 b- defN 23-Jun-15 06:40 client_test/cli_imports_test.py
+-rw-r--r--  2.0 unx    13833 b- defN 23-Jun-15 06:40 client_test/cli_test.py
+-rw-r--r--  2.0 unx     4768 b- defN 23-Jun-15 06:40 client_test/client_test.py
+-rw-r--r--  2.0 unx     4422 b- defN 23-Jun-15 06:40 client_test/cls_test.py
+-rw-r--r--  2.0 unx     2618 b- defN 23-Jun-15 06:40 client_test/config_test.py
+-rw-r--r--  2.0 unx    31907 b- defN 23-Jun-15 06:40 client_test/conftest.py
+-rw-r--r--  2.0 unx     4551 b- defN 23-Jun-15 06:40 client_test/container_app_test.py
+-rw-r--r--  2.0 unx    26624 b- defN 23-Jun-15 06:40 client_test/container_test.py
+-rw-r--r--  2.0 unx     1086 b- defN 23-Jun-15 06:40 client_test/deprecation_test.py
+-rw-r--r--  2.0 unx     2182 b- defN 23-Jun-15 06:40 client_test/e2e_test.py
+-rw-r--r--  2.0 unx      165 b- defN 23-Jun-15 06:40 client_test/error_test.py
+-rw-r--r--  2.0 unx      964 b- defN 23-Jun-15 06:40 client_test/function_serialization_test.py
+-rw-r--r--  2.0 unx    17319 b- defN 23-Jun-15 06:40 client_test/function_test.py
+-rw-r--r--  2.0 unx     3924 b- defN 23-Jun-15 06:40 client_test/gpu_test.py
+-rw-r--r--  2.0 unx     5047 b- defN 23-Jun-15 06:40 client_test/grpc_utils_test.py
+-rw-r--r--  2.0 unx      930 b- defN 23-Jun-15 06:40 client_test/helpers.py
+-rw-r--r--  2.0 unx    15884 b- defN 23-Jun-15 06:40 client_test/image_test.py
+-rw-r--r--  2.0 unx     2372 b- defN 23-Jun-15 06:40 client_test/live_reload_test.py
+-rw-r--r--  2.0 unx     2605 b- defN 23-Jun-15 06:40 client_test/lookup_test.py
+-rw-r--r--  2.0 unx     5301 b- defN 23-Jun-15 06:40 client_test/mount_test.py
+-rw-r--r--  2.0 unx     6239 b- defN 23-Jun-15 06:40 client_test/mounted_files_test.py
+-rw-r--r--  2.0 unx     2157 b- defN 23-Jun-15 06:40 client_test/notebook_test.py
+-rw-r--r--  2.0 unx     1390 b- defN 23-Jun-15 06:40 client_test/object_test.py
+-rw-r--r--  2.0 unx      413 b- defN 23-Jun-15 06:40 client_test/package_utils_test.py
+-rw-r--r--  2.0 unx     1648 b- defN 23-Jun-15 06:40 client_test/resolver_test.py
+-rw-r--r--  2.0 unx     1807 b- defN 23-Jun-15 06:40 client_test/retries_test.py
+-rw-r--r--  2.0 unx      359 b- defN 23-Jun-15 06:40 client_test/schedule_test.py
+-rw-r--r--  2.0 unx     1821 b- defN 23-Jun-15 06:40 client_test/secret_test.py
+-rw-r--r--  2.0 unx     1082 b- defN 23-Jun-15 06:40 client_test/serialization_test.py
+-rw-r--r--  2.0 unx     3872 b- defN 23-Jun-15 06:40 client_test/shared_volume_test.py
+-rw-r--r--  2.0 unx     8064 b- defN 23-Jun-15 06:40 client_test/stub_test.py
+-rw-r--r--  2.0 unx     2691 b- defN 23-Jun-15 06:40 client_test/utils_test.py
+-rw-r--r--  2.0 unx      410 b- defN 23-Jun-15 06:40 client_test/version_test.py
+-rw-r--r--  2.0 unx     1160 b- defN 23-Jun-15 06:40 client_test/watcher_test.py
+-rw-r--r--  2.0 unx     3837 b- defN 23-Jun-15 06:40 client_test/webhook_test.py
+-rw-r--r--  2.0 unx     1042 b- defN 23-Jun-15 06:40 modal/__init__.py
+-rw-r--r--  2.0 unx      157 b- defN 23-Jun-15 06:40 modal/__main__.py
+-rw-r--r--  2.0 unx     2106 b- defN 23-Jun-15 06:40 modal/_asgi.py
+-rw-r--r--  2.0 unx    13413 b- defN 23-Jun-15 06:40 modal/_blob_utils.py
+-rw-r--r--  2.0 unx    26368 b- defN 23-Jun-15 06:40 modal/_container_entrypoint.py
+-rw-r--r--  2.0 unx    10990 b- defN 23-Jun-15 06:40 modal/_function_utils.py
+-rw-r--r--  2.0 unx      450 b- defN 23-Jun-15 06:40 modal/_ipython.py
+-rw-r--r--  2.0 unx      929 b- defN 23-Jun-15 06:40 modal/_location.py
+-rw-r--r--  2.0 unx      850 b- defN 23-Jun-15 06:40 modal/_object_meta.py
+-rw-r--r--  2.0 unx    17552 b- defN 23-Jun-15 06:40 modal/_output.py
+-rw-r--r--  2.0 unx     1785 b- defN 23-Jun-15 06:40 modal/_proxy_tunnel.py
+-rw-r--r--  2.0 unx     5043 b- defN 23-Jun-15 06:40 modal/_pty.py
+-rw-r--r--  2.0 unx     5438 b- defN 23-Jun-15 06:40 modal/_resolver.py
+-rw-r--r--  2.0 unx     1885 b- defN 23-Jun-15 06:40 modal/_serialization.py
+-rw-r--r--  2.0 unx     7598 b- defN 23-Jun-15 06:40 modal/_traceback.py
+-rw-r--r--  2.0 unx     1995 b- defN 23-Jun-15 06:40 modal/_tracing.py
+-rw-r--r--  2.0 unx      490 b- defN 23-Jun-15 06:40 modal/_types.py
+-rw-r--r--  2.0 unx     3409 b- defN 23-Jun-15 06:40 modal/_watcher.py
+-rw-r--r--  2.0 unx     1704 b- defN 23-Jun-15 06:40 modal/aio.py
+-rw-r--r--  2.0 unx    11460 b- defN 23-Jun-15 06:41 modal/app.py
+-rw-r--r--  2.0 unx     8073 b- defN 23-Jun-15 06:41 modal/app.pyi
+-rw-r--r--  2.0 unx     2462 b- defN 23-Jun-15 06:40 modal/call_graph.py
+-rw-r--r--  2.0 unx     9175 b- defN 23-Jun-15 06:40 modal/client.py
+-rw-r--r--  2.0 unx     4479 b- defN 23-Jun-15 06:41 modal/client.pyi
+-rw-r--r--  2.0 unx     1793 b- defN 23-Jun-15 06:40 modal/cls.py
+-rw-r--r--  2.0 unx     6802 b- defN 23-Jun-15 06:40 modal/config.py
+-rw-r--r--  2.0 unx     5597 b- defN 23-Jun-15 06:40 modal/dict.py
+-rw-r--r--  2.0 unx     4312 b- defN 23-Jun-15 06:41 modal/dict.pyi
+-rw-r--r--  2.0 unx     2750 b- defN 23-Jun-15 06:40 modal/exception.py
+-rw-r--r--  2.0 unx    58140 b- defN 23-Jun-15 06:40 modal/functions.py
+-rw-r--r--  2.0 unx    24159 b- defN 23-Jun-15 06:41 modal/functions.pyi
+-rw-r--r--  2.0 unx     4995 b- defN 23-Jun-15 06:40 modal/gpu.py
+-rw-r--r--  2.0 unx    49023 b- defN 23-Jun-15 06:40 modal/image.py
+-rw-r--r--  2.0 unx    22504 b- defN 23-Jun-15 06:41 modal/image.pyi
+-rw-r--r--  2.0 unx    15439 b- defN 23-Jun-15 06:40 modal/mount.py
+-rw-r--r--  2.0 unx     7696 b- defN 23-Jun-15 06:41 modal/mount.pyi
+-rw-r--r--  2.0 unx    12349 b- defN 23-Jun-15 06:41 modal/object.py
+-rw-r--r--  2.0 unx    10877 b- defN 23-Jun-15 06:41 modal/object.pyi
+-rw-r--r--  2.0 unx      652 b- defN 23-Jun-15 06:40 modal/proxy.py
+-rw-r--r--  2.0 unx     1111 b- defN 23-Jun-15 06:41 modal/proxy.pyi
+-rw-r--r--  2.0 unx        0 b- defN 23-Jun-15 06:40 modal/py.typed
+-rw-r--r--  2.0 unx     5144 b- defN 23-Jun-15 06:40 modal/queue.py
+-rw-r--r--  2.0 unx     3375 b- defN 23-Jun-15 06:41 modal/queue.pyi
+-rw-r--r--  2.0 unx      502 b- defN 23-Jun-15 06:40 modal/requirements.txt
+-rw-r--r--  2.0 unx     3730 b- defN 23-Jun-15 06:40 modal/retries.py
+-rw-r--r--  2.0 unx     8792 b- defN 23-Jun-15 06:41 modal/runner.py
+-rw-r--r--  2.0 unx     2619 b- defN 23-Jun-15 06:40 modal/schedule.py
+-rw-r--r--  2.0 unx     5190 b- defN 23-Jun-15 06:40 modal/secret.py
+-rw-r--r--  2.0 unx     1150 b- defN 23-Jun-15 06:41 modal/secret.pyi
+-rw-r--r--  2.0 unx     4372 b- defN 23-Jun-15 06:40 modal/serving.py
+-rw-r--r--  2.0 unx     8270 b- defN 23-Jun-15 06:40 modal/shared_volume.py
+-rw-r--r--  2.0 unx     4226 b- defN 23-Jun-15 06:41 modal/shared_volume.pyi
+-rw-r--r--  2.0 unx    31463 b- defN 23-Jun-15 06:40 modal/stub.py
+-rw-r--r--  2.0 unx    20577 b- defN 23-Jun-15 06:41 modal/stub.pyi
+-rw-r--r--  2.0 unx       28 b- defN 23-Jun-15 06:40 modal/cli/__init__.py
+-rw-r--r--  2.0 unx     2966 b- defN 23-Jun-15 06:40 modal/cli/app.py
+-rw-r--r--  2.0 unx      484 b- defN 23-Jun-15 06:40 modal/cli/config.py
+-rw-r--r--  2.0 unx     1958 b- defN 23-Jun-15 06:40 modal/cli/entry_point.py
+-rw-r--r--  2.0 unx      902 b- defN 23-Jun-15 06:40 modal/cli/env.py
+-rw-r--r--  2.0 unx    10572 b- defN 23-Jun-15 06:40 modal/cli/import_refs.py
+-rw-r--r--  2.0 unx      689 b- defN 23-Jun-15 06:40 modal/cli/profile.py
+-rw-r--r--  2.0 unx     9118 b- defN 23-Jun-15 06:40 modal/cli/run.py
+-rw-r--r--  2.0 unx     3738 b- defN 23-Jun-15 06:40 modal/cli/secret.py
+-rw-r--r--  2.0 unx     3524 b- defN 23-Jun-15 06:40 modal/cli/token.py
+-rw-r--r--  2.0 unx      313 b- defN 23-Jun-15 06:40 modal/cli/utils.py
+-rw-r--r--  2.0 unx     9690 b- defN 23-Jun-15 06:40 modal/cli/volume.py
+-rw-r--r--  2.0 unx       28 b- defN 23-Jun-15 06:40 modal/extensions/__init__.py
+-rw-r--r--  2.0 unx      987 b- defN 23-Jun-15 06:40 modal/extensions/ipython.py
+-rw-r--r--  2.0 unx     6495 b- defN 23-Jun-15 06:40 modal/extensions/pymc.py
+-rw-r--r--  2.0 unx       28 b- defN 23-Jun-15 06:40 modal_base_images/__init__.py
+-rw-r--r--  2.0 unx      457 b- defN 23-Jun-15 06:40 modal_base_images/client_mount.py
+-rw-r--r--  2.0 unx      264 b- defN 23-Jun-15 06:40 modal_base_images/conda.py
+-rw-r--r--  2.0 unx      342 b- defN 23-Jun-15 06:40 modal_base_images/debian_slim.py
+-rw-r--r--  2.0 unx       28 b- defN 23-Jun-15 06:40 modal_proto/__init__.py
+-rw-r--r--  2.0 unx    27195 b- defN 23-Jun-15 06:40 modal_proto/api.proto
+-rw-r--r--  2.0 unx    45233 b- defN 23-Jun-15 06:41 modal_proto/api_grpc.py
+-rw-r--r--  2.0 unx   112701 b- defN 23-Jun-15 06:41 modal_proto/api_pb2.py
+-rw-r--r--  2.0 unx    97860 b- defN 23-Jun-15 06:41 modal_proto/api_pb2_grpc.py
+-rw-r--r--  2.0 unx       28 b- defN 23-Jun-15 06:40 modal_test_support/__init__.py
+-rw-r--r--  2.0 unx      134 b- defN 23-Jun-15 06:40 modal_test_support/assert_package.py
+-rw-r--r--  2.0 unx      171 b- defN 23-Jun-15 06:40 modal_test_support/consumed_map.py
+-rw-r--r--  2.0 unx     4757 b- defN 23-Jun-15 06:40 modal_test_support/functions.py
+-rw-r--r--  2.0 unx      183 b- defN 23-Jun-15 06:40 modal_test_support/hello.py
+-rw-r--r--  2.0 unx      266 b- defN 23-Jun-15 06:40 modal_test_support/image_run_function.py
+-rw-r--r--  2.0 unx      180 b- defN 23-Jun-15 06:40 modal_test_support/is_inside.py
+-rw-r--r--  2.0 unx      187 b- defN 23-Jun-15 06:40 modal_test_support/missing_main_conditional.py
+-rw-r--r--  2.0 unx       59 b- defN 23-Jun-15 06:40 modal_test_support/module_1.py
+-rw-r--r--  2.0 unx       59 b- defN 23-Jun-15 06:40 modal_test_support/module_2.py
+-rw-r--r--  2.0 unx      277 b- defN 23-Jun-15 06:40 modal_test_support/multistub.py
+-rw-r--r--  2.0 unx      228 b- defN 23-Jun-15 06:40 modal_test_support/multistub_is_inside.py
+-rw-r--r--  2.0 unx      222 b- defN 23-Jun-15 06:40 modal_test_support/multistub_is_inside_warning.py
+-rw-r--r--  2.0 unx      269 b- defN 23-Jun-15 06:40 modal_test_support/multistub_privately_decorated.py
+-rw-r--r--  2.0 unx      211 b- defN 23-Jun-15 06:40 modal_test_support/multistub_privately_decorated_named_stub.py
+-rw-r--r--  2.0 unx      218 b- defN 23-Jun-15 06:40 modal_test_support/multistub_same_name.py
+-rw-r--r--  2.0 unx      219 b- defN 23-Jun-15 06:40 modal_test_support/multistub_serialized_func.py
+-rw-r--r--  2.0 unx      197 b- defN 23-Jun-15 06:40 modal_test_support/package_mount.py
+-rw-r--r--  2.0 unx      171 b- defN 23-Jun-15 06:40 modal_test_support/progress_info.py
+-rw-r--r--  2.0 unx      153 b- defN 23-Jun-15 06:40 modal_test_support/script.py
+-rw-r--r--  2.0 unx      178 b- defN 23-Jun-15 06:40 modal_test_support/startup_failure.py
+-rw-r--r--  2.0 unx      177 b- defN 23-Jun-15 06:40 modal_test_support/stub.py
+-rw-r--r--  2.0 unx      144 b- defN 23-Jun-15 06:40 modal_test_support/unconsumed_map.py
+-rw-r--r--  2.0 unx      123 b- defN 23-Jun-15 06:40 modal_test_support/webhook_forgot_function.py
+-rw-r--r--  2.0 unx       28 b- defN 23-Jun-15 06:40 modal_utils/__init__.py
+-rw-r--r--  2.0 unx      465 b- defN 23-Jun-15 06:40 modal_utils/app_utils.py
+-rw-r--r--  2.0 unx    11319 b- defN 23-Jun-15 06:40 modal_utils/async_utils.py
+-rw-r--r--  2.0 unx      890 b- defN 23-Jun-15 06:40 modal_utils/decorator_utils.py
+-rw-r--r--  2.0 unx     9837 b- defN 23-Jun-15 06:40 modal_utils/grpc_utils.py
+-rw-r--r--  2.0 unx     1597 b- defN 23-Jun-15 06:40 modal_utils/hash_utils.py
+-rw-r--r--  2.0 unx     1426 b- defN 23-Jun-15 06:40 modal_utils/http_utils.py
+-rw-r--r--  2.0 unx      113 b- defN 23-Jun-15 06:40 modal_utils/logger.py
+-rw-r--r--  2.0 unx     1226 b- defN 23-Jun-15 06:40 modal_utils/package_utils.py
+-rw-r--r--  2.0 unx      458 b- defN 23-Jun-15 06:40 modal_version/__init__.py
+-rw-r--r--  2.0 unx       48 b- defN 23-Jun-15 06:41 modal_version/_version_generated.py
+-rw-r--r--  2.0 unx    10173 b- defN 23-Jun-15 06:41 modal_client-0.49.2406.dist-info/LICENSE
+-rw-r--r--  2.0 unx     1880 b- defN 23-Jun-15 06:41 modal_client-0.49.2406.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Jun-15 06:41 modal_client-0.49.2406.dist-info/WHEEL
+-rw-r--r--  2.0 unx       46 b- defN 23-Jun-15 06:41 modal_client-0.49.2406.dist-info/entry_points.txt
+-rw-r--r--  2.0 unx       93 b- defN 23-Jun-15 06:41 modal_client-0.49.2406.dist-info/top_level.txt
+?rw-rw-r--  2.0 unx    12855 b- defN 23-Jun-15 06:41 modal_client-0.49.2406.dist-info/RECORD
+158 files, 1058242 bytes uncompressed, 238817 bytes compressed:  77.4%
```

## zipnote {}

```diff
@@ -78,14 +78,17 @@
 
 Filename: client_test/object_test.py
 Comment: 
 
 Filename: client_test/package_utils_test.py
 Comment: 
 
+Filename: client_test/resolver_test.py
+Comment: 
+
 Filename: client_test/retries_test.py
 Comment: 
 
 Filename: client_test/schedule_test.py
 Comment: 
 
 Filename: client_test/secret_test.py
@@ -447,26 +450,26 @@
 
 Filename: modal_version/__init__.py
 Comment: 
 
 Filename: modal_version/_version_generated.py
 Comment: 
 
-Filename: modal_client-0.49.2401.dist-info/LICENSE
+Filename: modal_client-0.49.2406.dist-info/LICENSE
 Comment: 
 
-Filename: modal_client-0.49.2401.dist-info/METADATA
+Filename: modal_client-0.49.2406.dist-info/METADATA
 Comment: 
 
-Filename: modal_client-0.49.2401.dist-info/WHEEL
+Filename: modal_client-0.49.2406.dist-info/WHEEL
 Comment: 
 
-Filename: modal_client-0.49.2401.dist-info/entry_points.txt
+Filename: modal_client-0.49.2406.dist-info/entry_points.txt
 Comment: 
 
-Filename: modal_client-0.49.2401.dist-info/top_level.txt
+Filename: modal_client-0.49.2406.dist-info/top_level.txt
 Comment: 
 
-Filename: modal_client-0.49.2401.dist-info/RECORD
+Filename: modal_client-0.49.2406.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## modal/_resolver.py

```diff
@@ -1,10 +1,12 @@
 # Copyright Modal Labs 2023
+import asyncio
 import contextlib
-from typing import TYPE_CHECKING, Any, Dict, List, Optional, TypeVar
+from asyncio import Future
+from typing import TYPE_CHECKING, Dict, List, Optional, TypeVar
 
 from modal_proto import api_pb2
 
 if TYPE_CHECKING:
     from rich.spinner import Spinner
     from rich.tree import Tree
 else:
@@ -40,22 +42,22 @@
             self._step_node.label = step_completed(message, is_substep=True)
 
 
 class Resolver:
     # Unfortunately we can't use type annotations much in this file,
     # since that leads to circular dependencies
     _tree: Tree
-    _local_uuid_to_object: Dict[str, Any]
+    _local_uuid_to_future: Dict[str, Future]
 
     def __init__(self, output_mgr, client, app_id: Optional[str] = None):
         from ._output import step_progress
         from rich.tree import Tree
 
         self._output_mgr = output_mgr
-        self._local_uuid_to_object = {}
+        self._local_uuid_to_future = {}
         self._tree = Tree(step_progress("Creating objects..."), guide_style="gray50")
 
         # Accessible by objects
         self._client = client
         self._app_id = app_id
 
     @property
@@ -69,41 +71,53 @@
         return self._client
 
     async def preload(self, obj, existing_object_id: Optional[str] = None):
         if obj._preload is not None:
             return await obj._preload(self, existing_object_id)
 
     async def load(self, obj, existing_object_id: Optional[str] = None):
-        cached_obj = self._local_uuid_to_object.get(obj.local_uuid)
-        if cached_obj is not None:
-            # We already created this object before, shortcut this method
-            return cached_obj
-
-        created_obj = await obj._load(self, existing_object_id)
-
-        if existing_object_id is not None and created_obj.object_id != existing_object_id:
-            # TODO(erikbern): ignoring images is an ugly fix to a problem that's on the server.
-            # Unlike every other object, images are not assigned random ids, but rather an
-            # id given by the hash of its contents. This means we can't _force_ an image to
-            # have a particular id. The better solution is probably to separate "images"
-            # from "image definitions" or something like that, but that's a big project.
-            #
-            # Persisted refs are ignored because their life cycle is managed independently.
-            # The same tag on an app can be pointed at different objects.
-            if not obj._is_persisted_ref and not existing_object_id.startswith("im-"):
-                raise Exception(
-                    f"Tried creating an object using existing id {existing_object_id}"
-                    f" but it has id {created_obj.object_id}"
-                )
+        cached_future = self._local_uuid_to_future.get(obj.local_uuid)
+
+        if not cached_future:
+            # don't run any awaits within this if-block to prevent race conditions
+            async def loader():
+                created_obj = await obj._load(self, existing_object_id)
+                if existing_object_id is not None and created_obj.object_id != existing_object_id:
+                    # TODO(erikbern): ignoring images is an ugly fix to a problem that's on the server.
+                    # Unlike every other object, images are not assigned random ids, but rather an
+                    # id given by the hash of its contents. This means we can't _force_ an image to
+                    # have a particular id. The better solution is probably to separate "images"
+                    # from "image definitions" or something like that, but that's a big project.
+                    #
+                    # Persisted refs are ignored because their life cycle is managed independently.
+                    # The same tag on an app can be pointed at different objects.
+                    if not obj._is_persisted_ref and not existing_object_id.startswith("im-"):
+                        raise Exception(
+                            f"Tried creating an object using existing id {existing_object_id}"
+                            f" but it has id {created_obj.object_id}"
+                        )
+
+                return created_obj
+
+            cached_future = asyncio.create_task(loader())
+            self._local_uuid_to_future[obj.local_uuid] = cached_future
 
-        self._local_uuid_to_object[obj.local_uuid] = created_obj
-        return created_obj
+        if cached_future.done():
+            return cached_future.result()
+
+        return await cached_future
 
     def objects(self) -> List:
-        return list(self._local_uuid_to_object.values())
+        for fut in self._local_uuid_to_future.values():
+            if not fut.done():
+                # this will raise an exception if not all loads have been awaited, but that *should* never happen
+                raise RuntimeError(
+                    "All loaded objects have not been resolved yet, can't get all objects for the resolver!"
+                )
+        return [fut.result() for fut in self._local_uuid_to_future.values()]
 
     @contextlib.contextmanager
     def display(self):
         from ._output import step_completed
 
         if self._output_mgr is None:
             yield
```

## modal/app.py

```diff
@@ -4,15 +4,15 @@
 from modal_proto import api_pb2
 from modal_utils.async_utils import synchronize_apis
 from modal_utils.grpc_utils import get_proto_oneof, retry_transient_errors
 
 from ._resolver import Resolver
 from .client import _Client
 from .config import logger
-from .object import _Handle, _Provider, DEFAULT_ENVIRONMENT_NAME
+from .object import _Handle, _Provider
 
 if TYPE_CHECKING:
     from rich.tree import Tree
 else:
     Tree = TypeVar("Tree")
 
 
@@ -180,15 +180,15 @@
 
     @staticmethod
     async def _init_new(
         client: _Client,
         description: Optional[str] = None,
         detach: bool = False,
         deploying: bool = False,
-        environment_name: str = DEFAULT_ENVIRONMENT_NAME,
+        environment_name: str = "",
     ) -> "_App":
         # Start app
         # TODO(erikbern): maybe this should happen outside of this method?
         app_req = api_pb2.AppCreateRequest(
             description=description,
             initializing=deploying,
             detach=detach,
@@ -196,15 +196,15 @@
         )
         app_resp = await retry_transient_errors(client.stub.AppCreate, app_req)
         app_page_url = app_resp.app_logs_url
         logger.debug(f"Created new app with id {app_resp.app_id}")
         return _App(client, app_resp.app_id, app_page_url)
 
     @staticmethod
-    async def _init_from_name(client: _Client, name: str, namespace, environment_name: str):
+    async def _init_from_name(client: _Client, name: str, namespace, environment_name: str = ""):
         # Look up any existing deployment
         app_req = api_pb2.AppGetByDeploymentNameRequest(
             name=name, namespace=namespace, environment_name=environment_name
         )
         app_resp = await retry_transient_errors(client.stub.AppGetByDeploymentName, app_req)
         existing_app_id = app_resp.app_id or None
```

## modal/app.pyi

```diff
@@ -59,19 +59,19 @@
         ...
 
     @staticmethod
     async def _init_existing(client: modal.client._Client, existing_app_id: str) -> _App:
         ...
 
     @staticmethod
-    async def _init_new(client: modal.client._Client, description: typing.Union[str, None] = None, detach: bool = False, deploying: bool = False, environment_name: str = 'default') -> _App:
+    async def _init_new(client: modal.client._Client, description: typing.Union[str, None] = None, detach: bool = False, deploying: bool = False, environment_name: str = '') -> _App:
         ...
 
     @staticmethod
-    async def _init_from_name(client: modal.client._Client, name: str, namespace, environment_name: str):
+    async def _init_from_name(client: modal.client._Client, name: str, namespace, environment_name: str = ''):
         ...
 
     async def create_one_object(self, provider: modal.object._Provider) -> modal.object._Handle:
         ...
 
     async def deploy(self, name: str, namespace, object_entity: str) -> str:
         ...
@@ -168,24 +168,24 @@
 
         async def aio(self, *args, **kwargs) -> App:
             ...
 
     _init_existing: ___init_existing_spec
 
     class ___init_new_spec(typing_extensions.Protocol):
-        def __call__(self, client: modal.client.Client, description: typing.Union[str, None] = None, detach: bool = False, deploying: bool = False, environment_name: str = 'default') -> App:
+        def __call__(self, client: modal.client.Client, description: typing.Union[str, None] = None, detach: bool = False, deploying: bool = False, environment_name: str = '') -> App:
             ...
 
         async def aio(self, *args, **kwargs) -> App:
             ...
 
     _init_new: ___init_new_spec
 
     class ___init_from_name_spec(typing_extensions.Protocol):
-        def __call__(self, client: modal.client.Client, name: str, namespace, environment_name: str):
+        def __call__(self, client: modal.client.Client, name: str, namespace, environment_name: str = ''):
             ...
 
         async def aio(self, *args, **kwargs):
             ...
 
     _init_from_name: ___init_from_name_spec
```

## modal/client.pyi

```diff
@@ -11,15 +11,15 @@
 
 
 async def _grpc_exc_string(exc: grpclib.exceptions.GRPCError, method_name: str, server_url: str, timeout: float) -> str:
     ...
 
 
 class _Client:
-    def __init__(self, server_url, client_type, credentials, version='0.49.2401', *, no_verify=False):
+    def __init__(self, server_url, client_type, credentials, version='0.49.2406', *, no_verify=False):
         ...
 
     @property
     def stub(self):
         ...
 
     async def _open(self):
@@ -60,15 +60,15 @@
 
     @classmethod
     def set_env_client(cls, client):
         ...
 
 
 class Client:
-    def __init__(self, server_url, client_type, credentials, version='0.49.2401', *, no_verify=False):
+    def __init__(self, server_url, client_type, credentials, version='0.49.2406', *, no_verify=False):
         ...
 
     @property
     def stub(self):
         ...
 
     class ___open_spec(typing_extensions.Protocol):
@@ -145,15 +145,15 @@
 
     @classmethod
     def set_env_client(cls, client):
         ...
 
 
 class AioClient:
-    def __init__(self, server_url, client_type, credentials, version='0.49.2401', *, no_verify=False):
+    def __init__(self, server_url, client_type, credentials, version='0.49.2406', *, no_verify=False):
         ...
 
     @property
     def stub(self):
         ...
 
     async def _open(self, *args, **kwargs):
```

## modal/functions.py

```diff
@@ -954,62 +954,67 @@
             )
             response = await resolver.client.stub.FunctionPrecreate(req)
             # Update the precreated function handle (todo: hack until we merge providers/handles)
             function_handle._hydrate(resolver.client, response.function_id, response.handle_metadata)
             return function_handle
 
         async def _load(resolver: Resolver, existing_object_id: Optional[str]) -> _FunctionHandle:
+            # TODO: should we really join recursively here? Maybe it's better to move this logic to the app class?
             status_row = resolver.add_status_row()
             status_row.message(f"Creating {tag}...")
 
             if proxy:
                 proxy_id = (await resolver.load(proxy)).object_id
             else:
                 proxy_id = None
 
-            # TODO: should we really join recursively here? Maybe it's better to move this logic to the app class?
-            if image is not None:
-                if not isinstance(image, _Image):
-                    raise InvalidError(f"Expected modal.Image object. Got {type(image)}.")
-                image_id = (await resolver.load(image)).object_id
-            else:
-                image_id = None  # Happens if it's a notebook function
-            secret_ids = []
-            for secret in secrets:
-                secret_id = (await resolver.load(secret)).object_id
-                secret_ids.append(secret_id)
-
-            mount_ids = []
-            for mount in all_mounts:
-                mount_ids.append((await resolver.load(mount)).object_id)
+            async def _load_ids(providers) -> typing.List[str]:
+                loaded_handles = await asyncio.gather(*[resolver.load(provider) for provider in providers])
+                return [handle.object_id for handle in loaded_handles]
+
+            async def image_loader():
+                if image is not None:
+                    if not isinstance(image, _Image):
+                        raise InvalidError(f"Expected modal.Image object. Got {type(image)}.")
+                    image_id = (await resolver.load(image)).object_id
+                else:
+                    image_id = None  # Happens if it's a notebook function
+                return image_id
 
+            # validation
             if not isinstance(shared_volumes, dict):
                 raise InvalidError("shared_volumes must be a dict[str, SharedVolume] where the keys are paths")
-            shared_volume_mounts = []
-            # Relies on dicts being ordered (true as of Python 3.6).
+            validated_shared_volumes = []
             for path, shared_volume in shared_volumes.items():
                 path = PurePath(path).as_posix()
                 abs_path = posixpath.abspath(path)
 
                 if path != abs_path:
                     raise InvalidError(f"Shared volume {abs_path} must be a canonical, absolute path.")
                 elif abs_path == "/":
                     raise InvalidError(f"Shared volume {abs_path} cannot be mounted into root directory.")
                 elif abs_path == "/root":
                     raise InvalidError(f"Shared volume {abs_path} cannot be mounted at '/root'.")
                 elif abs_path == "/tmp":
                     raise InvalidError(f"Shared volume {abs_path} cannot be mounted at '/tmp'.")
+                validated_shared_volumes.append((path, shared_volume))
 
-                shared_volume_mounts.append(
-                    api_pb2.SharedVolumeMount(
-                        mount_path=path,
-                        shared_volume_id=(await resolver.load(shared_volume)).object_id,
-                        allow_cross_region=allow_cross_region_volumes,
+            async def shared_volume_loader():
+                shared_volume_mounts = []
+                volume_ids = await _load_ids([vol for _, vol in validated_shared_volumes])
+                # Relies on dicts being ordered (true as of Python 3.6).
+                for ((path, _), volume_id) in zip(validated_shared_volumes, volume_ids):
+                    shared_volume_mounts.append(
+                        api_pb2.SharedVolumeMount(
+                            mount_path=path,
+                            shared_volume_id=volume_id,
+                            allow_cross_region=allow_cross_region_volumes,
+                        )
                     )
-                )
+                return shared_volume_mounts
 
             if is_generator:
                 function_type = api_pb2.Function.FUNCTION_TYPE_GENERATOR
             else:
                 function_type = api_pb2.Function.FUNCTION_TYPE_FUNCTION
 
             if cpu is not None and cpu < 0.0:
@@ -1031,14 +1036,18 @@
                 function_serialized = None
                 class_serialized = None
 
             stub_name = ""
             if stub and stub.name:
                 stub_name = stub.name
 
+            mount_ids, secret_ids, image_id, shared_volume_mounts = await asyncio.gather(
+                _load_ids(all_mounts), _load_ids(secrets), image_loader(), shared_volume_loader()
+            )
+
             # Create function remotely
             function_definition = api_pb2.Function(
                 module_name=info.module_name,
                 function_name=info.function_name,
                 mount_ids=mount_ids,
                 secret_ids=secret_ids,
                 image_id=image_id,
```

## modal/object.py

```diff
@@ -15,16 +15,14 @@
 from .client import _Client
 from .exception import InvalidError, NotFoundError
 
 H = TypeVar("H", bound="_Handle")
 
 _BLOCKING_H, _ASYNC_H = synchronize_apis(H)
 
-DEFAULT_ENVIRONMENT_NAME: str = "default"
-
 
 class _Handle(metaclass=ObjectMeta):
     """mdmd:hidden The shared base class of any synced/distributed object in Modal.
 
     Examples of objects include Modal primitives like Images and Functions, as
     well as distributed data structures like Queues or Dicts.
     """
@@ -124,15 +122,14 @@
         if client is None:
             client = await _Client.from_env()
         request = api_pb2.AppLookupObjectRequest(
             app_name=app_name,
             object_tag=tag,
             namespace=namespace,
             object_entity=cls._type_prefix,
-            environment_name=DEFAULT_ENVIRONMENT_NAME,
         )
         try:
             response = await retry_transient_errors(client.stub.AppLookupObject, request)
             if not response.object_id:
                 # Legacy error message: remove soon
                 raise NotFoundError(response.error_message)
         except GRPCError as exc:
@@ -223,15 +220,15 @@
         from .app import _App
 
         if client is None:
             client = await _Client.from_env()
 
         handle_cls = self._get_handle_cls()
         object_entity = handle_cls._type_prefix
-        app = await _App._init_from_name(client, label, namespace, environment_name=DEFAULT_ENVIRONMENT_NAME)
+        app = await _App._init_from_name(client, label, namespace)
         handle = await app.create_one_object(self)
         await app.deploy(label, namespace, object_entity)  # TODO(erikbern): not needed if the app already existed
         return handle
 
     @typechecked
     def persist(self, label: str, namespace=api_pb2.DEPLOYMENT_NAMESPACE_WORKSPACE):
         """Deploy a Modal app containing this object. This object can then be imported from other apps using
```

## modal/object.pyi

```diff
@@ -298,10 +298,7 @@
     @classmethod
     async def lookup(*args, **kwargs) -> _ASYNC_H:
         ...
 
     @classmethod
     async def _exists(*args, **kwargs) -> bool:
         ...
-
-
-DEFAULT_ENVIRONMENT_NAME: str
```

## modal/runner.py

```diff
@@ -11,15 +11,14 @@
 
 from . import _pty
 from ._output import OutputManager, step_completed, step_progress, get_app_logs_loop
 from .app import _App, is_local
 from .client import HEARTBEAT_INTERVAL, HEARTBEAT_TIMEOUT, _Client
 from .config import config
 from .exception import InvalidError
-from .object import DEFAULT_ENVIRONMENT_NAME
 from .queue import _QueueHandle
 
 
 async def _heartbeat(client, app_id):
     request = api_pb2.AppHeartbeatRequest(app_id=app_id)
     # TODO(erikbern): we should capture exceptions here
     # * if request fails: destroy the client
@@ -31,15 +30,15 @@
 async def _run_stub(
     stub,
     client: Optional[_Client] = None,
     stdout=None,
     show_progress: Optional[bool] = None,
     detach: bool = False,
     output_mgr: Optional[OutputManager] = None,
-    environment: str = DEFAULT_ENVIRONMENT_NAME,
+    environment: str = "",
 ) -> AsyncGenerator[_App, None]:
     if not is_local():
         raise InvalidError(
             "Can not run an app from within a container."
             " Are you calling stub.run() directly?"
             " Consider using the `modal run` shell command."
         )
@@ -177,15 +176,15 @@
         raise InvalidError(
             f"Invalid app name {name}. App names may only contain alphanumeric characters, dashes, periods, and underscores, and must be less than 64 characters in length. "
         )
 
     if client is None:
         client = await _Client.from_env()
 
-    app = await _App._init_from_name(client, name, namespace, environment_name=DEFAULT_ENVIRONMENT_NAME)
+    app = await _App._init_from_name(client, name, namespace, environment_name="")
 
     output_mgr = OutputManager(stdout, show_progress)
 
     async with TaskContext(0) as tc:
         # Start heartbeats loop to keep the client alive
         tc.infinite_loop(lambda: _heartbeat(client, app.app_id), sleep=HEARTBEAT_INTERVAL)
```

## modal_version/_version_generated.py

```diff
@@ -1,2 +1,2 @@
 # Copyright Modal Labs 2023
-build_number = 2401
+build_number = 2406
```

## Comparing `modal_client-0.49.2401.dist-info/LICENSE` & `modal_client-0.49.2406.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `modal_client-0.49.2401.dist-info/METADATA` & `modal_client-0.49.2406.dist-info/METADATA`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: modal-client
-Version: 0.49.2401
+Version: 0.49.2406
 Summary: Python client library for Modal
 Author: Modal Labs
 Author-email: erik@modal.com
 Project-URL: Homepage, https://modal.com
 Keywords: modal,client,cloud,serverless,infrastructure
 Classifier: Topic :: System :: Distributed Computing
 Classifier: Operating System :: OS Independent
```

## Comparing `modal_client-0.49.2401.dist-info/RECORD` & `modal_client-0.49.2406.dist-info/RECORD`

 * *Files 3% similar despite different names*

```diff
@@ -22,14 +22,15 @@
 client_test/live_reload_test.py,sha256=vAt2I6pi5FGKE359QSKnQT-8kiq7R5g8wyKiA_Tu9ac,2372
 client_test/lookup_test.py,sha256=p7mwPT3QPV0Xlhx7rz4JEpGT3HiG-Gkq8XUZIMXRJ08,2605
 client_test/mount_test.py,sha256=k2OxwZZPNuo4lGzH4s7azWoUgapzJRNw62nKbkaGdFE,5301
 client_test/mounted_files_test.py,sha256=svuTGzOvbspbBj6twaHmCckdtpckVLpvpyCEWnAQrF0,6239
 client_test/notebook_test.py,sha256=AzzAfpXBwXvfD4zwyqAr9GW-rM0RY4aJlXKBJ3GqBp8,2157
 client_test/object_test.py,sha256=qLh9548t-Az6wK1xkKAzEohW99ZtnY5u2o19sNrkXiY,1390
 client_test/package_utils_test.py,sha256=5BHIMwW03ettWIZ2AqFHcD8n5FIXoEcy1g2qTyqFo3Y,413
+client_test/resolver_test.py,sha256=64ayX7ICo25BnoClWmQhAicEPh2r9z5-Ze_9dkCK07E,1648
 client_test/retries_test.py,sha256=Q-hNmElJjxYQ0DQ0VjEzjN7fX4wZvi3YSXS5oawjxHU,1807
 client_test/schedule_test.py,sha256=lyj6pHchOg_CqyJNQY8NbRUTfh-RxwAugcX5-P4b-0k,359
 client_test/secret_test.py,sha256=xY2kBPf11JwCTPSuSqGrp4VaTQOcsgxgomFreCY6vhs,1821
 client_test/serialization_test.py,sha256=OfDsjphPr4kjN2FZZ9iI2DHYRYprzzCs1OkUAs_J6Dc,1082
 client_test/shared_volume_test.py,sha256=0fP4r1hCanByXR_zLiDffaFSDqHpLxksRiXhzk4DVdA,3872
 client_test/stub_test.py,sha256=fb4rEcTRA6rMKjM9ujA2sPopHCpZCGYW44YiqElZdD0,8064
 client_test/utils_test.py,sha256=AMlrnJQfGDjy1c8mnmaNwnCmDMUh726mFx8QHSAsaDc,2691
@@ -44,48 +45,48 @@
 modal/_function_utils.py,sha256=6hVfx1xazHZeGkznGljTBEQfs6Z-CtVVfl35rI7EGEM,10990
 modal/_ipython.py,sha256=HF_DYy0e0qM9WnGDmTY30s1RxzGya9GeORCauCEpRaE,450
 modal/_location.py,sha256=_SdCPzVOl7HRwLWIxzTJjhdpOo1sIl4flfEJ-bAbiDE,929
 modal/_object_meta.py,sha256=iOd17GaCMZT3uZeyZY2D6GWSBYwcmKM38w7gTd7DgSw,850
 modal/_output.py,sha256=jsWc-FsgSC_cdfBcM76RKMFHBQhJfqdQqXpp1GuzHvQ,17552
 modal/_proxy_tunnel.py,sha256=XTB23djYwYa8PzMsiNwkIF2y3nxfOyR8CSBtLiKomFs,1785
 modal/_pty.py,sha256=S93_Gyc1wuXa7dCxJVZNQtHpc7GwdeLz9xrU--3NCa0,5043
-modal/_resolver.py,sha256=j0XS81vyBrOhvSUNlz97HD0DVuyAiaG12BrzOBuemWU,4701
+modal/_resolver.py,sha256=uy4DXqkYxEM_-uC17F4vyEAecav4LU959_WS7L7rC44,5438
 modal/_serialization.py,sha256=sjAZVh80PU5WpknDMf73aqSHStkGYtsFRYC4Lt8FoxI,1885
 modal/_traceback.py,sha256=H8kaGplSQALs7nEdob2sNrv6wlpVONXbcSBDQklxWN8,7598
 modal/_tracing.py,sha256=69f2w-j0Mvh8Xz95WApYfE6NDSkAWBMIYRzGTYniFi8,1995
 modal/_types.py,sha256=vUvweCqAt0S-mni_V_EGc_rDCKgJlU5g0P8r08zl1ko,490
 modal/_watcher.py,sha256=fTCNt2s5P-l91c6Mc9wWGbQe2CCFsPyRMNRe7GqXQ4o,3409
 modal/aio.py,sha256=YMc6uTqoQB1JQZ7cVQag6coqrfjyth1y07C6xomfWS4,1704
-modal/app.py,sha256=98DaDyO3SOjMSGKrCrlRRsGm3rAE8O7LwPwMboMolDQ,11503
-modal/app.pyi,sha256=00zbEXXYiimXnKD-0gqxQU42foXfVCzMNjNPHfLTBhw,8077
+modal/app.py,sha256=d1dMdMPWnnmKnMZPkBKqcgqE99BujbLh1K8HPBbSMUg,11460
+modal/app.pyi,sha256=xDC2xatYdz1_Uyz0fgMlpW6H4Oa1zPPuIgm_LKibPus,8073
 modal/call_graph.py,sha256=_cCMOMg7IeWNiRXdd-gJbb7pUYw2Ahl-KbXsizM6Lcg,2462
 modal/client.py,sha256=esHB88BxrULpV7g4JnAGmuORCQJOv3DApi0U0h7dDII,9175
-modal/client.pyi,sha256=YCI8_J4jvXBCuS4nyKcfspXnGdQfinGccniymYdl9Bc,4479
+modal/client.pyi,sha256=6o77SbrsECSbPLuiKqM0zjm0zbZIfo9IkuvHlH4-Xvc,4479
 modal/cls.py,sha256=U9nkgWQpvX2EWeDdEhMwimbQfkvmV88nNTe33-ujqbc,1793
 modal/config.py,sha256=fTH9PWk5sGpw3JWH_kpqlb7zogbmu8_6mjgrg3WeyjY,6802
 modal/dict.py,sha256=OTzOidKAEtHdBI3qbQr0s7Al4TyPDWzq-MXutoB5KC0,5597
 modal/dict.pyi,sha256=i7lk6rHe0rBOxdVgRsJNIqHtxzAmQOGAFSrQxF_Br2c,4312
 modal/exception.py,sha256=gxHMYe7CiH1ijgGyiPe-KAxJOVkUquIMPgrOc-QIdSc,2750
-modal/functions.py,sha256=Wx3WzkVRhggwXVfsZu-fC3WKvr6ySFewgYUuK3PY4gA,57506
+modal/functions.py,sha256=FdCn2bqPng6gL8RHWSMQL_q8TDf_je3dpKyFUdAO9Rc,58140
 modal/functions.pyi,sha256=uGini8aFEDjC4ZuwGxtJyKuaO4avB3SBBo79JsCVMtg,24159
 modal/gpu.py,sha256=CXpA2TLKXNhegMkRufAFBOeCqN2S8sKtW62p6G-z4Fc,4995
 modal/image.py,sha256=ScRpLcItnRkLOfHXD4AWo8mRQEhMPNidnuY3GDfZG-o,49023
 modal/image.pyi,sha256=4LZRxFOu5rCeCzXVc3F9EIXRx7zrjCTUNxddhEqLzGM,22504
 modal/mount.py,sha256=rD-vxD06isJQsFQJSdvp8oii9BLlzSHxAK2aYB4y9yo,15439
 modal/mount.pyi,sha256=KFuYq-xh8I66SWoodfB0F9svY6lEIHaqtJQvH7WmXsI,7696
-modal/object.py,sha256=cSAjio_Vk0aYP4OKsZ52ZUJGzdTEKPZh60yymSFOnE4,12490
-modal/object.pyi,sha256=kibiXTFO7lZfMF2xmdQeRxqWnwjIcI_l54iEntq55Os,10908
+modal/object.py,sha256=J4OGsus--COq2znFO7G_WcM4rOXokYi7-t_fE8kH0Uk,12349
+modal/object.pyi,sha256=_OpnqcXT2xawklXBw34RKAV9gkhGWpIgdpR2MQhc4LY,10877
 modal/proxy.py,sha256=W4K4gAOzWTzyCQ9GJS9eHxh0REXW-j7PZfVALk2G2KY,652
 modal/proxy.pyi,sha256=TDSPr6qtqnvl43w9QkflvnjK5SqGQxxy0txq_Yn9ndw,1111
 modal/py.typed,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 modal/queue.py,sha256=-Fg-vwVtJllR1061nb9mD7szzlM4odd-1hFlTBDLK7c,5144
 modal/queue.pyi,sha256=Oq1tu64_LvWxuNg4z9a8x1Wjl8hkYQvzFCOE-0z6Mxw,3375
 modal/requirements.txt,sha256=OjsbXFkCSdkzzryZP82Q73osr5wxQ6EUzmGcK7twfkA,502
 modal/retries.py,sha256=bRDYRTUNFzmjRAggCcoMViqwu-PNnqbokc_QYCf_2nc,3730
-modal/runner.py,sha256=CUTgb-I4raiwEBOx8yGxmj2mZvoZVsyYow9PxghPVQA,8881
+modal/runner.py,sha256=BDgKqxsauzmguTt-ROiU71kOQMYLEzYyNODTsDwTDwE,8792
 modal/schedule.py,sha256=KUzkyV8bUZ1Oclx9thoR6q1ujX0JwPHkHKroJFS4X4k,2619
 modal/secret.py,sha256=R3wcQQBg2lQYtQ0xX279BOLehmpSOjiGAUWThiySJdg,5190
 modal/secret.pyi,sha256=IYILwn2aLELTwS3bjKBWhvuP2urZK3ucp6GGnzzeTPM,1150
 modal/serving.py,sha256=wla0ywRmXXYrfWgan_BkouBxOiIXNQ8GhBXZslmnwxE,4372
 modal/shared_volume.py,sha256=jSCLAHdl9Fq60b5FGa4OLbID7zi98kTaxBBOBevYOIA,8270
 modal/shared_volume.pyi,sha256=3CSAbHVXgKyNUYS0yxSmZO0aZIhDDalP_ALZ5B1P6zc,4226
 modal/stub.py,sha256=LtQDFyHhUabryf4V5W9i37Ll9IfjlMNODJ8xQ4xwkBc,31463
@@ -144,14 +145,14 @@
 modal_utils/decorator_utils.py,sha256=uCBKzLRMjoit8E5koKqgI-HBPznj0AvGKl-jUzbHMEE,890
 modal_utils/grpc_utils.py,sha256=qQu1Xc0O5eKaMqGYY8AIq-2sYBKZ6sVMov-OgnDjpVc,9837
 modal_utils/hash_utils.py,sha256=YOE1LZwyqaTQSZajrF-H_5_iJkjxMclJewC0SgH_8xA,1597
 modal_utils/http_utils.py,sha256=DGKvrSQxAHjP_LNdM6EaL-TIQPGDX5vt3gcMGg2xkz4,1426
 modal_utils/logger.py,sha256=odPE0R8_9GkufC_74wqolLikZVIbdxmwDF5xeoILklU,113
 modal_utils/package_utils.py,sha256=TLF7GygWqsqZpL-dVnchts55IcTwkMPFLBGeZjuRXCw,1226
 modal_version/__init__.py,sha256=mvujZot4MZ2ZzvN-QWqUcdJ-AG3rsuVzC_r7Jfwzh4E,458
-modal_version/_version_generated.py,sha256=4NerlyaWApMDJAebrse-176_A-9sUX7hP21y6y-Y_y8,48
-modal_client-0.49.2401.dist-info/LICENSE,sha256=psuoW8kuDP96RQsdhzwOqi6fyWv0ct8CR6Jr7He_P_k,10173
-modal_client-0.49.2401.dist-info/METADATA,sha256=HauQjqnSSdz_4w-iNcFCHUWXaihtpe8LizPBo_cj5rU,1880
-modal_client-0.49.2401.dist-info/WHEEL,sha256=G16H4A3IeoQmnOrYV4ueZGKSjhipXx8zc8nu9FGlvMA,92
-modal_client-0.49.2401.dist-info/entry_points.txt,sha256=An-wYgeEUnm6xzrAP9_NTSTSciYvvEWsMZILtYrvpAI,46
-modal_client-0.49.2401.dist-info/top_level.txt,sha256=vTBZ60jGY6Z2jEeHlo3uEJRmrR3M1rZoXur0ZaqOrS4,93
-modal_client-0.49.2401.dist-info/RECORD,,
+modal_version/_version_generated.py,sha256=BQOKEa5G6JsfTaoYGylL5BuDNN3YUzlG97ow5PHumFQ,48
+modal_client-0.49.2406.dist-info/LICENSE,sha256=psuoW8kuDP96RQsdhzwOqi6fyWv0ct8CR6Jr7He_P_k,10173
+modal_client-0.49.2406.dist-info/METADATA,sha256=icfJaDT5ojvsrhqH07UKSzEcynCowzFseS9mhJ9SpO4,1880
+modal_client-0.49.2406.dist-info/WHEEL,sha256=G16H4A3IeoQmnOrYV4ueZGKSjhipXx8zc8nu9FGlvMA,92
+modal_client-0.49.2406.dist-info/entry_points.txt,sha256=An-wYgeEUnm6xzrAP9_NTSTSciYvvEWsMZILtYrvpAI,46
+modal_client-0.49.2406.dist-info/top_level.txt,sha256=vTBZ60jGY6Z2jEeHlo3uEJRmrR3M1rZoXur0ZaqOrS4,93
+modal_client-0.49.2406.dist-info/RECORD,,
```

