# Comparing `tmp/ipaplatform-4.8.7-py2.py3-none-any.whl.zip` & `tmp/ipaplatform-4.8.9-py2.py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,45 +1,55 @@
-Zip file size: 74608 bytes, number of entries: 43
--rw-rw-r--  2.0 unx      147 b- defN 20-Jun-10 15:55 ipaplatform/__init__.py
--rw-rw-r--  2.0 unx     1380 b- defN 20-May-12 13:04 ipaplatform/_importhook.py
+Zip file size: 79358 bytes, number of entries: 53
+-rw-rw-r--  2.0 unx      147 b- defN 20-Jul-09 07:26 ipaplatform/__init__.py
+-rw-rw-r--  2.0 unx     1380 b- defN 20-Jun-26 14:32 ipaplatform/_importhook.py
 -rw-rw-r--  2.0 unx      283 b- defN 20-May-11 09:00 ipaplatform/constants.py
--rw-rw-r--  2.0 unx     5908 b- defN 20-Jun-10 15:55 ipaplatform/osinfo.py
+-rw-rw-r--  2.0 unx     6137 b- defN 20-Jul-30 11:09 ipaplatform/osinfo.py
 -rw-rw-r--  2.0 unx      275 b- defN 20-May-11 09:00 ipaplatform/paths.py
 -rw-rw-r--  2.0 unx      281 b- defN 20-May-11 09:00 ipaplatform/services.py
 -rw-rw-r--  2.0 unx      275 b- defN 20-May-11 09:00 ipaplatform/tasks.py
 -rw-rw-r--  2.0 unx      918 b- defN 20-May-11 09:00 ipaplatform/base/__init__.py
--rw-rw-r--  2.0 unx     2643 b- defN 20-May-12 13:04 ipaplatform/base/constants.py
--rw-rw-r--  2.0 unx    21515 b- defN 20-Jun-10 16:16 ipaplatform/base/paths.py
--rw-rw-r--  2.0 unx    18938 b- defN 20-May-12 13:04 ipaplatform/base/services.py
--rw-rw-r--  2.0 unx    17026 b- defN 20-Jun-10 15:55 ipaplatform/base/tasks.py
+-rw-rw-r--  2.0 unx     2643 b- defN 20-Jun-26 14:32 ipaplatform/base/constants.py
+-rw-rw-r--  2.0 unx    21735 b- defN 20-Aug-10 06:17 ipaplatform/base/paths.py
+-rw-rw-r--  2.0 unx    18938 b- defN 20-Jul-09 07:26 ipaplatform/base/services.py
+-rw-rw-r--  2.0 unx    17179 b- defN 20-Aug-10 06:17 ipaplatform/base/tasks.py
 -rw-rw-r--  2.0 unx      133 b- defN 19-Apr-08 14:24 ipaplatform/debian/__init__.py
--rw-rw-r--  2.0 unx      787 b- defN 20-May-12 13:04 ipaplatform/debian/constants.py
--rw-rw-r--  2.0 unx     6115 b- defN 20-Jun-10 16:16 ipaplatform/debian/paths.py
--rw-rw-r--  2.0 unx     6479 b- defN 20-May-12 13:04 ipaplatform/debian/services.py
--rw-rw-r--  2.0 unx     6879 b- defN 20-Jun-10 15:55 ipaplatform/debian/tasks.py
--rw-rw-r--  2.0 unx     1107 b- defN 20-May-12 13:04 ipaplatform/fedora/__init__.py
--rw-rw-r--  2.0 unx      875 b- defN 20-May-12 13:04 ipaplatform/fedora/constants.py
--rw-rw-r--  2.0 unx     1384 b- defN 20-May-12 13:04 ipaplatform/fedora/paths.py
--rw-rw-r--  2.0 unx     1946 b- defN 20-May-12 13:04 ipaplatform/fedora/services.py
--rw-rw-r--  2.0 unx     1555 b- defN 20-May-12 13:04 ipaplatform/fedora/tasks.py
+-rw-rw-r--  2.0 unx      787 b- defN 20-Jun-26 14:32 ipaplatform/debian/constants.py
+-rw-rw-r--  2.0 unx     6115 b- defN 20-Jul-09 07:26 ipaplatform/debian/paths.py
+-rw-rw-r--  2.0 unx     6479 b- defN 20-Jun-26 14:32 ipaplatform/debian/services.py
+-rw-rw-r--  2.0 unx     6879 b- defN 20-Jul-09 07:26 ipaplatform/debian/tasks.py
+-rw-rw-r--  2.0 unx     1107 b- defN 20-Jun-26 14:32 ipaplatform/fedora/__init__.py
+-rw-rw-r--  2.0 unx      875 b- defN 20-Jun-26 14:32 ipaplatform/fedora/constants.py
+-rw-rw-r--  2.0 unx     1384 b- defN 20-Jun-26 14:32 ipaplatform/fedora/paths.py
+-rw-rw-r--  2.0 unx     1946 b- defN 20-Jun-26 14:32 ipaplatform/fedora/services.py
+-rw-rw-r--  2.0 unx     1555 b- defN 20-Jul-09 07:26 ipaplatform/fedora/tasks.py
+-rw-rw-r--  2.0 unx      168 b- defN 20-Aug-10 06:17 ipaplatform/fedora_container/__init__.py
+-rw-rw-r--  2.0 unx      299 b- defN 20-Jul-30 11:09 ipaplatform/fedora_container/constants.py
+-rw-rw-r--  2.0 unx      957 b- defN 20-Aug-06 08:20 ipaplatform/fedora_container/paths.py
+-rw-rw-r--  2.0 unx      811 b- defN 20-Jul-30 11:09 ipaplatform/fedora_container/services.py
+-rw-rw-r--  2.0 unx     1009 b- defN 20-Aug-10 06:17 ipaplatform/fedora_container/tasks.py
 -rw-rw-r--  2.0 unx      842 b- defN 20-May-11 09:00 ipaplatform/redhat/__init__.py
--rw-rw-r--  2.0 unx    13404 b- defN 20-May-12 13:04 ipaplatform/redhat/authconfig.py
--rw-rw-r--  2.0 unx      575 b- defN 20-May-12 13:04 ipaplatform/redhat/constants.py
--rw-rw-r--  2.0 unx     1579 b- defN 20-May-12 13:04 ipaplatform/redhat/paths.py
--rw-rw-r--  2.0 unx     9886 b- defN 20-May-12 13:04 ipaplatform/redhat/services.py
--rw-rw-r--  2.0 unx    27430 b- defN 20-Jun-10 15:55 ipaplatform/redhat/tasks.py
+-rw-rw-r--  2.0 unx    13018 b- defN 20-Aug-10 06:17 ipaplatform/redhat/authconfig.py
+-rw-rw-r--  2.0 unx      575 b- defN 20-Jul-09 07:26 ipaplatform/redhat/constants.py
+-rw-rw-r--  2.0 unx     1579 b- defN 20-Jul-09 07:26 ipaplatform/redhat/paths.py
+-rw-rw-r--  2.0 unx     9886 b- defN 20-Jun-26 14:32 ipaplatform/redhat/services.py
+-rw-rw-r--  2.0 unx    27430 b- defN 20-Jul-09 07:26 ipaplatform/redhat/tasks.py
 -rw-rw-r--  2.0 unx      846 b- defN 20-May-11 09:00 ipaplatform/rhel/__init__.py
--rw-rw-r--  2.0 unx      697 b- defN 20-May-12 13:04 ipaplatform/rhel/constants.py
--rw-rw-r--  2.0 unx     1206 b- defN 20-May-12 13:04 ipaplatform/rhel/paths.py
--rw-rw-r--  2.0 unx     1874 b- defN 20-May-12 13:04 ipaplatform/rhel/services.py
+-rw-rw-r--  2.0 unx      697 b- defN 20-Jun-26 14:32 ipaplatform/rhel/constants.py
+-rw-rw-r--  2.0 unx     1206 b- defN 20-Jun-26 14:32 ipaplatform/rhel/paths.py
+-rw-rw-r--  2.0 unx     1874 b- defN 20-Jun-26 14:32 ipaplatform/rhel/services.py
 -rw-rw-r--  2.0 unx     1042 b- defN 20-May-11 09:00 ipaplatform/rhel/tasks.py
--rw-rw-r--  2.0 unx      131 b- defN 20-Jun-10 15:55 ipaplatform/suse/__init__.py
--rw-rw-r--  2.0 unx      524 b- defN 20-Jun-10 15:55 ipaplatform/suse/constants.py
--rw-rw-r--  2.0 unx     4031 b- defN 20-Jun-10 16:16 ipaplatform/suse/paths.py
--rw-rw-r--  2.0 unx     6938 b- defN 20-Jun-10 15:55 ipaplatform/suse/services.py
--rw-rw-r--  2.0 unx     1294 b- defN 20-Jun-10 15:55 ipaplatform/suse/tasks.py
--rw-rw-r--  2.0 unx    35147 b- defN 20-Jun-10 19:58 ipaplatform-4.8.7.dist-info/COPYING
--rw-rw-r--  2.0 unx     1234 b- defN 20-Jun-10 19:58 ipaplatform-4.8.7.dist-info/METADATA
--rw-rw-r--  2.0 unx      110 b- defN 20-Jun-10 19:58 ipaplatform-4.8.7.dist-info/WHEEL
--rw-rw-r--  2.0 unx       12 b- defN 20-Jun-10 19:58 ipaplatform-4.8.7.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     3593 b- defN 20-Jun-10 19:58 ipaplatform-4.8.7.dist-info/RECORD
-43 files, 209244 bytes uncompressed, 68902 bytes compressed:  67.1%
+-rw-rw-r--  2.0 unx      164 b- defN 20-Aug-10 06:17 ipaplatform/rhel_container/__init__.py
+-rw-rw-r--  2.0 unx      287 b- defN 20-Jul-30 11:09 ipaplatform/rhel_container/constants.py
+-rw-rw-r--  2.0 unx      927 b- defN 20-Jul-30 11:09 ipaplatform/rhel_container/paths.py
+-rw-rw-r--  2.0 unx      771 b- defN 20-Jul-30 11:09 ipaplatform/rhel_container/services.py
+-rw-rw-r--  2.0 unx      997 b- defN 20-Aug-10 06:17 ipaplatform/rhel_container/tasks.py
+-rw-rw-r--  2.0 unx      131 b- defN 20-Jul-09 07:26 ipaplatform/suse/__init__.py
+-rw-rw-r--  2.0 unx      524 b- defN 20-Jul-09 07:26 ipaplatform/suse/constants.py
+-rw-rw-r--  2.0 unx     4031 b- defN 20-Jul-09 07:26 ipaplatform/suse/paths.py
+-rw-rw-r--  2.0 unx     6938 b- defN 20-Jul-09 07:26 ipaplatform/suse/services.py
+-rw-rw-r--  2.0 unx     1294 b- defN 20-Jul-09 07:26 ipaplatform/suse/tasks.py
+-rw-rw-r--  2.0 unx    35147 b- defN 20-Aug-20 10:51 ipaplatform-4.8.9.dist-info/COPYING
+-rw-rw-r--  2.0 unx     1234 b- defN 20-Aug-20 10:51 ipaplatform-4.8.9.dist-info/METADATA
+-rw-rw-r--  2.0 unx      110 b- defN 20-Aug-20 10:51 ipaplatform-4.8.9.dist-info/WHEEL
+-rw-rw-r--  2.0 unx       12 b- defN 20-Aug-20 10:51 ipaplatform-4.8.9.dist-info/top_level.txt
+?rw-rw-r--  2.0 unx     4534 b- defN 20-Aug-20 10:51 ipaplatform-4.8.9.dist-info/RECORD
+53 files, 216791 bytes uncompressed, 72132 bytes compressed:  66.7%
```

## zipnote {}

```diff
@@ -60,14 +60,29 @@
 
 Filename: ipaplatform/fedora/services.py
 Comment: 
 
 Filename: ipaplatform/fedora/tasks.py
 Comment: 
 
+Filename: ipaplatform/fedora_container/__init__.py
+Comment: 
+
+Filename: ipaplatform/fedora_container/constants.py
+Comment: 
+
+Filename: ipaplatform/fedora_container/paths.py
+Comment: 
+
+Filename: ipaplatform/fedora_container/services.py
+Comment: 
+
+Filename: ipaplatform/fedora_container/tasks.py
+Comment: 
+
 Filename: ipaplatform/redhat/__init__.py
 Comment: 
 
 Filename: ipaplatform/redhat/authconfig.py
 Comment: 
 
 Filename: ipaplatform/redhat/constants.py
@@ -93,14 +108,29 @@
 
 Filename: ipaplatform/rhel/services.py
 Comment: 
 
 Filename: ipaplatform/rhel/tasks.py
 Comment: 
 
+Filename: ipaplatform/rhel_container/__init__.py
+Comment: 
+
+Filename: ipaplatform/rhel_container/constants.py
+Comment: 
+
+Filename: ipaplatform/rhel_container/paths.py
+Comment: 
+
+Filename: ipaplatform/rhel_container/services.py
+Comment: 
+
+Filename: ipaplatform/rhel_container/tasks.py
+Comment: 
+
 Filename: ipaplatform/suse/__init__.py
 Comment: 
 
 Filename: ipaplatform/suse/constants.py
 Comment: 
 
 Filename: ipaplatform/suse/paths.py
@@ -108,23 +138,23 @@
 
 Filename: ipaplatform/suse/services.py
 Comment: 
 
 Filename: ipaplatform/suse/tasks.py
 Comment: 
 
-Filename: ipaplatform-4.8.7.dist-info/COPYING
+Filename: ipaplatform-4.8.9.dist-info/COPYING
 Comment: 
 
-Filename: ipaplatform-4.8.7.dist-info/METADATA
+Filename: ipaplatform-4.8.9.dist-info/METADATA
 Comment: 
 
-Filename: ipaplatform-4.8.7.dist-info/WHEEL
+Filename: ipaplatform-4.8.9.dist-info/WHEEL
 Comment: 
 
-Filename: ipaplatform-4.8.7.dist-info/top_level.txt
+Filename: ipaplatform-4.8.9.dist-info/top_level.txt
 Comment: 
 
-Filename: ipaplatform-4.8.7.dist-info/RECORD
+Filename: ipaplatform-4.8.9.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## ipaplatform/osinfo.py

```diff
@@ -8,52 +8,52 @@
 
 - alpine
 - centos (like rhel, fedora)
 - debian
 - fedora
 - rhel
 - ubuntu (like debian)
+
+The platform ids for ipaplatform providers are based on:
+
+1) IPAPLATFORM_OVERRIDE env var
+2) ipaplatform.override.OVERRIDE value
+3) ID field of /etc/os-release (Linux)
+4) ID_LIKE fields of /etc/os-release (Linux)
 """
 from __future__ import absolute_import
 
+from collections.abc import Mapping
 import importlib
-import io
 import re
+import os
 import sys
 import warnings
 
-import six
 
 import ipaplatform
 try:
     from ipaplatform.override import OVERRIDE
 except ImportError:
     OVERRIDE = None
 
 
-# pylint: disable=no-name-in-module, import-error
-if six.PY3:
-    from collections.abc import Mapping
-else:
-    from collections import Mapping
-# pylint: enable=no-name-in-module, import-error
-
 _osrelease_line = re.compile(
     u"^(?!#)(?P<name>[a-zA-Z0-9_]+)="
     u"(?P<quote>[\"\']?)(?P<value>.+)(?P=quote)$"
 )
 
 
 def _parse_osrelease(filename='/etc/os-release'):
     """Parser for /etc/os-release for Linux distributions
 
     https://www.freedesktop.org/software/systemd/man/os-release.html
     """
     release = {}
-    with io.open(filename, encoding='utf-8') as f:
+    with open(filename) as f:
         for line in f:
             mo = _osrelease_line.match(line)
             if mo is not None:
                 release[mo.group('name')] = mo.group('value')
     if 'ID_LIKE' in release:
         release['ID_LIKE'] = tuple(
             v.strip()
@@ -182,18 +182,23 @@
         return tuple(int(p) for p in version_id.split('.'))
 
     @property
     def platform_ids(self):
         """Ordered tuple of detected platforms (including override)
         """
         platforms = []
-        if OVERRIDE is not None:
+        # env var first
+        env = os.environ.get("IPAPLATFORM_OVERRIDE")
+        if env:
+            platforms.append(env)
+        # override from package definition
+        if OVERRIDE is not None and OVERRIDE not in platforms:
             # allow RPM and Debian packages to override platform
             platforms.append(OVERRIDE)
-        if OVERRIDE != self.id:
+        if self.id not in platforms:
             platforms.append(self.id)
         platforms.extend(self.id_like)
         return tuple(platforms)
 
     @property
     def platform(self):
         if self._platform is not None:
```

## ipaplatform/base/paths.py

```diff
@@ -23,14 +23,15 @@
 
 import os
 
 
 class BasePathNamespace:
     BIN_HOSTNAMECTL = "/bin/hostnamectl"
     ECHO = "/bin/echo"
+    FIPS_MODE_SETUP = "/usr/bin/fips-mode-setup"
     GZIP = "/bin/gzip"
     LS = "/bin/ls"
     SYSTEMCTL = "/bin/systemctl"
     SYSTEMD_DETECT_VIRT = "/usr/bin/systemd-detect-virt"
     TAR = "/bin/tar"
     AUTOFS_LDAP_AUTH_CONF = "/etc/autofs_ldap_auth.conf"
     ETC_FEDORA_RELEASE = "/etc/fedora-release"
@@ -109,27 +110,30 @@
     # Trusted CA certificates used to be written out to this file. In newer
     # versions of FreeIPA, it has been replaced by IPA_P11_KIT.
     SYSTEMWIDE_IPA_CA_CRT = "/etc/pki/ca-trust/source/anchors/ipa-ca.crt"
     IPA_P11_KIT = "/etc/pki/ca-trust/source/ipa.p11-kit"
     CA_CERTIFICATES_BUNDLE_PEM = None
     CA_CERTIFICATES_DIR = None
     NSS_DB_DIR = "/etc/pki/nssdb"
+    PKI_CONFIGURATION = "/etc/pki"
     PKI_TOMCAT = "/etc/pki/pki-tomcat"
     PKI_TOMCAT_ALIAS_DIR = "/etc/pki/pki-tomcat/alias"
     PKI_TOMCAT_ALIAS_PWDFILE_TXT = "/etc/pki/pki-tomcat/alias/pwdfile.txt"
     PKI_TOMCAT_PASSWORD_CONF = "/etc/pki/pki-tomcat/password.conf"
     PKI_TOMCAT_SERVER_XML = "/etc/pki/pki-tomcat/server.xml"
     ETC_REDHAT_RELEASE = "/etc/redhat-release"
     RESOLV_CONF = "/etc/resolv.conf"
     SAMBA_KEYTAB = "/etc/samba/samba.keytab"
     SMB_CONF = "/etc/samba/smb.conf"
     LIMITS_CONF = "/etc/security/limits.conf"
     SSH_CONFIG_DIR = "/etc/ssh"
     SSH_CONFIG = "/etc/ssh/ssh_config"
     SSHD_CONFIG = "/etc/ssh/sshd_config"
+    SSHD_IPA_CONFIG = "/etc/ssh/sshd_config.d/04-ipa.conf"
+    SSHD_IPA_CONFIG_TEMPLATE = "/usr/share/ipa/client/sshd_ipa.conf.template"
     SSSD_CONF = "/etc/sssd/sssd.conf"
     SSSD_CONF_BKP = "/etc/sssd/sssd.conf.bkp"
     SSSD_CONF_DELETED = "/etc/sssd/sssd.conf.deleted"
     ETC_SYSCONFIG_DIR = "/etc/sysconfig"
     ETC_SYSCONFIG_AUTHCONFIG = "/etc/sysconfig/authconfig"
     SYSCONFIG_AUTOFS = "/etc/sysconfig/autofs"
     SYSCONFIG_DIRSRV = "/etc/sysconfig/dirsrv"
@@ -317,15 +321,15 @@
     CA_BACKUP_KEYS_P12 = "/var/lib/pki/pki-tomcat/alias/ca_backup_keys.p12"
     KRA_BACKUP_KEYS_P12 = "/var/lib/pki/pki-tomcat/alias/kra_backup_keys.p12"
     CA_CS_CFG_PATH = "/var/lib/pki/pki-tomcat/conf/ca/CS.cfg"
     CASIGNEDLOGCERT_CFG = (
         "/var/lib/pki/pki-tomcat/ca/profiles/ca/caSignedLogCert.cfg")
     KRA_CS_CFG_PATH = "/var/lib/pki/pki-tomcat/conf/kra/CS.cfg"
     KRACERT_P12 = "/root/kracert.p12"
-    SAMBA_DIR = "/var/lib/samba/"
+    SAMBA_DIR = "/var/lib/samba"
     SSSD_DB = "/var/lib/sss/db"
     SSSD_MC_GROUP = "/var/lib/sss/mc/group"
     SSSD_MC_PASSWD = "/var/lib/sss/mc/passwd"
     SSSD_PUBCONF_DIR = "/var/lib/sss/pubconf"
     SSSD_PUBCONF_KNOWN_HOSTS = "/var/lib/sss/pubconf/known_hosts"
     SSSD_PUBCONF_KRB5_INCLUDE_D_DIR = "/var/lib/sss/pubconf/krb5.include.d/"
     VAR_LOG_AUDIT = "/var/log/audit/audit.log"
```

## ipaplatform/base/tasks.py

```diff
@@ -204,15 +204,20 @@
 
         raise NotImplementedError()
 
     def is_nosssd_supported(self):
         """
         Check if the flag --no-sssd is supported for client install.
         """
+        return True
 
+    def is_mkhomedir_supported(self):
+        """
+        Check if the flag --mkhomedir is supported for client install.
+        """
         return True
 
     def backup_auth_configuration(self, path):
         """
         Create backup of access control configuration.
         :param path: store the backup here. This will be passed to
         restore_auth_configuration as well.
```

## ipaplatform/redhat/authconfig.py

```diff
@@ -23,14 +23,15 @@
 import six
 import abc
 
 from ipaplatform.paths import paths
 from ipapython import ipautil
 from ipapython.admintool import ScriptError
 import os
+import time
 
 FILES_TO_NOT_BACKUP = ['passwd', 'group', 'shadow', 'gshadow']
 
 logger = logging.getLogger(__name__)
 
 
 def get_auth_tool():
@@ -99,44 +100,33 @@
         profile = output_items[0]
         features = output_items[1:]
         return profile, features
 
     def configure(self, sssd, mkhomedir, statestore, sudo=True):
         # In the statestore, the following keys are used for the
         # 'authselect' module:
+        # Old method:
         # profile: name of the profile configured pre-installation
         # features_list: list of features configured pre-installation
         # mkhomedir: True if installation was called with --mkhomedir
         # profile and features_list are used when reverting to the
         # pre-install state
-        cfg = self._parse_authselect_output()
-        if cfg:
-            statestore.backup_state('authselect', 'profile', cfg[0])
-            statestore.backup_state(
-                    'authselect', 'features_list', " ".join(cfg[1]))
-        else:
-            # cfg = None means that the current conf is not managed by
-            # authselect but by authconfig.
-            # As we are using authselect to configure the host,
-            # it will not be possible to revert to a custom authconfig
-            # configuration later (during uninstall)
-            # Best thing to do will be to use sssd profile at this time
-            logger.warning(
-                "WARNING: The configuration pre-client installation is not "
-                "managed by authselect and cannot be backed up. "
-                "Uninstallation may not be able to revert to the original "
-                "state.")
+        # New method:
+        # backup: name of the authselect backup
+        backup_name = "pre_ipaclient_{}".format(time.strftime("%Y%m%d%H%M%S"))
+        statestore.backup_state('authselect', 'backup', backup_name)
 
         cmd = [paths.AUTHSELECT, "select", "sssd"]
         if mkhomedir:
             cmd.append("with-mkhomedir")
             statestore.backup_state('authselect', 'mkhomedir', True)
         if sudo:
             cmd.append("with-sudo")
         cmd.append("--force")
+        cmd.append("--backup={}".format(backup_name))
 
         ipautil.run(cmd)
 
     def unconfigure(
         self, fstore, statestore, was_sssd_installed, was_sssd_configured
     ):
         if not statestore.has_state('authselect') and was_sssd_installed:
@@ -175,18 +165,23 @@
             if features_state is not None:
                 features = [
                     f.strip() for f in features_state.split(' ') if f.strip()
                 ]
             else:
                 features = []
 
-        cmd = [paths.AUTHSELECT, "select", profile]
-        cmd.extend(features)
-        cmd.append("--force")
-        ipautil.run(cmd)
+        backup = statestore.restore_state('authselect', 'backup')
+        if backup:
+            cmd = [paths.AUTHSELECT, "backup-restore", backup]
+            ipautil.run(cmd)
+        else:
+            cmd = [paths.AUTHSELECT, "select", profile]
+            cmd.extend(features)
+            cmd.append("--force")
+            ipautil.run(cmd)
 
     def backup(self, path):
         current = self._get_authselect_current_output()
         if current is None:
             return
 
         if not os.path.exists(path):
```

## Comparing `ipaplatform-4.8.7.dist-info/COPYING` & `ipaplatform-4.8.9.dist-info/COPYING`

 * *Files identical despite different names*

## Comparing `ipaplatform-4.8.7.dist-info/METADATA` & `ipaplatform-4.8.9.dist-info/METADATA`

 * *Files 11% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: ipaplatform
-Version: 4.8.7
+Version: 4.8.9
 Summary: FreeIPA platform
 Home-page: https://www.freeipa.org/
 Author: FreeIPA Developers
 Author-email: freeipa-devel@lists.fedorahosted.org
 Maintainer: FreeIPA Developers
 Maintainer-email: freeipa-devel@redhat.com
 License: GPLv3
@@ -22,14 +22,14 @@
 Classifier: Operating System :: POSIX :: Linux
 Classifier: Operating System :: Unix
 Classifier: Topic :: Internet :: Name Service (DNS)
 Classifier: Topic :: Security
 Classifier: Topic :: System :: Systems Administration :: Authentication/Directory :: LDAP
 Requires-Python: >=3.6.0
 Requires-Dist: cffi
-Requires-Dist: ipapython (==4.8.7)
+Requires-Dist: ipapython (==4.8.9)
 Requires-Dist: pyasn1
 Requires-Dist: six
 
 FreeIPA platform
```

## Comparing `ipaplatform-4.8.7.dist-info/RECORD` & `ipaplatform-4.8.9.dist-info/RECORD`

 * *Files 15% similar despite different names*

```diff
@@ -1,43 +1,53 @@
 ipaplatform/__init__.py,sha256=mV7XUi7XjbbU7AlvQx8MB14dd8hRzBDRGR97LFiTHFU,147
 ipaplatform/_importhook.py,sha256=lfoNCBCvHD6bZBunneL-qNMx-qblTBOT5qGjGt2T8fw,1380
 ipaplatform/constants.py,sha256=K4amItEefLGCUc0lh1W2KRblEDcOKRXbLJCRkEkxqa4,283
-ipaplatform/osinfo.py,sha256=8sIwYjfMjt129aPxgi8Bo6n6SHCvtPtLiE50rJGB4sw,5908
+ipaplatform/osinfo.py,sha256=5ZNTz8Yw7rUJFvgnz9Pq4CKOLB4H5rFKHxr5uJOuo2g,6137
 ipaplatform/paths.py,sha256=UxgW70jw-97dquY2btBJ8HLKS8ClFx8SEW_4KsnjJmg,275
 ipaplatform/services.py,sha256=rAiWOwCl8D29GnTyje56oibT7GklEe3o-B1tYAt8WEQ,281
 ipaplatform/tasks.py,sha256=77V6zsBvO28ziaLgZSd7_boVR-wIpDyY7DdjBKBPj-Q,275
 ipaplatform/base/__init__.py,sha256=rbK4A5o4lK-GiVVUbKKMG7mrkR_UyX7i6FvbPpZr64A,918
 ipaplatform/base/constants.py,sha256=EzY5va72rDtpaFsH1VP9FQLP1FabX53n4_SCZcGyVOc,2643
-ipaplatform/base/paths.py,sha256=sxKVSDXAnAxY9LxrYB6H4omz2K1qDtxTlvuyUxm8gLY,21515
+ipaplatform/base/paths.py,sha256=3DU_lrrQGmcTyUfXSkMqMbkcHVyt-JMXIBeO8Zq5V0o,21735
 ipaplatform/base/services.py,sha256=LYpz880JJwdt2v4QlC_OODwvTMvOhHohx89mfbt3exw,18938
-ipaplatform/base/tasks.py,sha256=D3pnxQLJyf6MhkmsS2vvCFLY89vel8_4RzD5hEJ5ywY,17026
+ipaplatform/base/tasks.py,sha256=0XUdOkECZmFv0Lqo1XzaRAo9xwmjjdCzt2tQamzszzk,17179
 ipaplatform/debian/__init__.py,sha256=bxYAGGUJdOrRxHFl54HnsTshFD_aj_bwjPG-N9BfGCU,133
 ipaplatform/debian/constants.py,sha256=a4o2JFl-m2iz19lEPDIQrpMMTxc-8SDJizqrZyiTa9A,787
 ipaplatform/debian/paths.py,sha256=1IPlMUoKiFhpCo6xgehYwwdAv5hqrVPaZh7G2KsUSLE,6115
 ipaplatform/debian/services.py,sha256=PDQGqo0jbGD3wORrOhALUsFLvjRYfNJnr29d32tOIB8,6479
 ipaplatform/debian/tasks.py,sha256=usj9s5_N3wF7L1MBAtG2s29DDZi_fMYFKVdorw3gew0,6879
 ipaplatform/fedora/__init__.py,sha256=vVnaWfAE1emhzOJHDU6iUNtKWK4TEAY6bq6H8djrELc,1107
 ipaplatform/fedora/constants.py,sha256=zd_1HjhrGtISXv-ek4iymP-iV7I-rdPXxc2G-SmCUKk,875
 ipaplatform/fedora/paths.py,sha256=n9igtV4lLsKoCXvdY0m_XGfftGv8fIsucArxZQq_Up8,1384
 ipaplatform/fedora/services.py,sha256=A3K74mYImhwfmPx4TBAlWP3hrE8MdWMO-Xf21puLawY,1946
 ipaplatform/fedora/tasks.py,sha256=yn9M1N1arzcdtiIMaGx1MHnrncXEUbuEba841qUDMF8,1555
+ipaplatform/fedora_container/__init__.py,sha256=MAzgFFWBtG4YG1cEK2gUqLIoS6EXpRiA3el5Ulg50i8,168
+ipaplatform/fedora_container/constants.py,sha256=fAQD974lj3UyS5aMGmjfE-T_KLvyIDmJsA7WTJkPmc8,299
+ipaplatform/fedora_container/paths.py,sha256=28ZgJ9P81EOitWZWTj0LZfqTVyuvt926f2y2s3zgSpk,957
+ipaplatform/fedora_container/services.py,sha256=Fj-pJCd-NOKUIDiYglpg7ybvLawcRYgvVIM91uugRGI,811
+ipaplatform/fedora_container/tasks.py,sha256=732eU5e4GmspUx6KQvk-ho4UOhRA-KG16CWZnDhyEc0,1009
 ipaplatform/redhat/__init__.py,sha256=Gncb9aihnIo5Zv60IWD7K_c-wnNcU6x30JTriHXDIf0,842
-ipaplatform/redhat/authconfig.py,sha256=fOwz7kCoWUBSJB12zvKuOaSIjBBki10_DLEhpwirkRU,13404
+ipaplatform/redhat/authconfig.py,sha256=USoVa_YI-2RtKZq_5T5afQduA3kv0BBRDsu3W6oXQXQ,13018
 ipaplatform/redhat/constants.py,sha256=iSCgbS0a1SWEKbpmibSwaK0qRovvBUyKG1PNG4ZN_Uo,575
 ipaplatform/redhat/paths.py,sha256=L-9L6_YBHArpTy-LBC_ouoz9WEv6AvJsTyALLAfp24U,1579
 ipaplatform/redhat/services.py,sha256=UkUuuiypzQtgV-_IbQpPPNNpY7Xe4jKFaFzRwDf4Tu8,9886
 ipaplatform/redhat/tasks.py,sha256=EayiXpnlTT_amvzs-1PqZ7-vtPFrfmsEJEH1DCokhvY,27430
 ipaplatform/rhel/__init__.py,sha256=KmlcMNkLZ-arhc5866FlIQRZqu4l_dJysXDekTu6eyY,846
 ipaplatform/rhel/constants.py,sha256=Nsf8OPjKU51U2NBsnEEoAYAE5-KBPAY1CroD5jF9jVw,697
 ipaplatform/rhel/paths.py,sha256=KIhB1LJR854uloWHzXCd7dzvLQPY2pYvjzlaPT6XXog,1206
 ipaplatform/rhel/services.py,sha256=rMQ5b8AfMQNbNJ5-FRuT2bBKz9vX78qczUDindKl43s,1874
 ipaplatform/rhel/tasks.py,sha256=OitWdBZd82DUkAXov-4M5URkQgv2yZmt1DwQC1yjJ50,1042
+ipaplatform/rhel_container/__init__.py,sha256=098g4I6OL8Fgn1Teg1lrNAAhhSjcBv1Qt7ABWB2dQvw,164
+ipaplatform/rhel_container/constants.py,sha256=YTkeM_ZxLob_BXLKN0gJ_aPk8272sUGRPE2F2xyxuDY,287
+ipaplatform/rhel_container/paths.py,sha256=FtzFasxcm_EJA4341f5RIz9-ogK1L8U0crhchH2dfhc,927
+ipaplatform/rhel_container/services.py,sha256=f6F6TmrRTjJhC35_V3SL7CBNdjChhjfRLm_GDM-vhxY,771
+ipaplatform/rhel_container/tasks.py,sha256=UWOZEyVf7xqc6ctJ6GDZ5UqVDqyP4opphQTX6HuyrqU,997
 ipaplatform/suse/__init__.py,sha256=CJ2Qz8gU5Yiofj4iVvevh_8MnLelo5MsKLQe0ynVLcg,131
 ipaplatform/suse/constants.py,sha256=6LojIXZc5zUZrNpGTIla2CB4WUYJctUOygWd2iRvGbk,524
 ipaplatform/suse/paths.py,sha256=aV5PlLvtSz9Z4Kc5dM8iuQiXtkERX65BRPYKm73jAOg,4031
 ipaplatform/suse/services.py,sha256=aFbFOV3ZJqXYC_gUEro8vLtX6vAX_tpKEp_wkvqxnpQ,6938
 ipaplatform/suse/tasks.py,sha256=fRrf41vI-WyYZKchIu8W2kwkW-W5zPNyYfEIe2aSSmc,1294
-ipaplatform-4.8.7.dist-info/COPYING,sha256=jOtLnuWt7d5Hsx6XXB2QxzrSe2sWWh3NgMfFRetluQM,35147
-ipaplatform-4.8.7.dist-info/METADATA,sha256=QaW3yo9Kksqjm2IMKxpK8Xc3XORYZd1pIYSI17UboO4,1234
-ipaplatform-4.8.7.dist-info/WHEEL,sha256=8zNYZbwQSXoB9IfXOjPfeNwvAsALAjffgk27FqvCWbo,110
-ipaplatform-4.8.7.dist-info/top_level.txt,sha256=gY2UAdgrJg5xh-vbKgIq4RnMdEZ-HCb5lusKtbaMXsE,12
-ipaplatform-4.8.7.dist-info/RECORD,,
+ipaplatform-4.8.9.dist-info/COPYING,sha256=jOtLnuWt7d5Hsx6XXB2QxzrSe2sWWh3NgMfFRetluQM,35147
+ipaplatform-4.8.9.dist-info/METADATA,sha256=u4hdJ4HqvF3CsAFKh-2MZAu_WZHeKW8u7TIcX2quqqw,1234
+ipaplatform-4.8.9.dist-info/WHEEL,sha256=8zNYZbwQSXoB9IfXOjPfeNwvAsALAjffgk27FqvCWbo,110
+ipaplatform-4.8.9.dist-info/top_level.txt,sha256=gY2UAdgrJg5xh-vbKgIq4RnMdEZ-HCb5lusKtbaMXsE,12
+ipaplatform-4.8.9.dist-info/RECORD,,
```

